window.__require=function t(e,i,n){function o(a,s){if(!i[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({ActionEvent:[function(t,e,i){"use strict";cc._RF.push(e,"6cec81E6xpJha9kLGshjdk8","ActionEvent");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){},onClick:function(t,e){this.node.dispatchEvent(new cc.Event.EventCustom(e,!0))}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],AnimEvent:[function(t,e,i){"use strict";cc._RF.push(e,"ed85cO6wFBO1oa4VrDfi3g7","AnimEvent"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onAnimCompleted:function(){this.node.destroy()}}),cc._RF.pop()},{}],Audio:[function(t,e,i){"use strict";cc._RF.push(e,"d983bGxrrZHt6V//bCOnrSX","Audio"),cc.Class({extends:cc.Component,properties:{bgVolume:1,deskVolume:1,bgAudioID:-1},init:function(){var t;null!=(t=cc.sys.localStorage.getItem("bgVolume"))&&(this.bgVolume=parseFloat(t)),null!=(t=cc.sys.localStorage.getItem("deskVolume"))&&(this.deskVolume=parseFloat(t)),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll()})},getUrl:function(t){return cc.url.raw("resources/sounds/"+t)},playBGM:function(t){var e=this.getUrl(t);this.bgAudioID>=0&&cc.audioEngine.stop(this.bgAudioID),this.bgAudioID=cc.audioEngine.play(e,!0,this.bgVolume)},playSFX:function(t){var e=this.getUrl(t);if(this.sfxVolume>0)cc.audioEngine.play(e,!1,this.deskVolume)},setSFXVolume:function(t){this.sfxVolume!=t&&(cc.sys.localStorage.setItem("deskVolume",t),this.deskVolume=t)},getState:function(){return cc.audioEngine.getState(this.bgAudioID)},setBGMVolume:function(t,e){this.bgAudioID>=0&&(t>0&&cc.audioEngine.getState(this.bgAudioID)===cc.audioEngine.AudioState.PAUSED?cc.audioEngine.resume(this.bgAudioID):0==t&&cc.audioEngine.pause(this.bgAudioID)),(this.bgVolume!=t||e)&&(cc.sys.localStorage.setItem("bgVolume",t),this.bgmVolume=t,cc.audioEngine.setVolume(this.bgAudioID,t))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],Base64:[function(t,e,i){"use strict";cc._RF.push(e,"8a9bcPo4GZL2aYuqS5Gbs8/","Base64"),cc.Class({extends:cc.Component,properties:{},statics:{decode:function(t){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i=t.length,n=0;"="==t.charAt(i-1)&&("="==t.charAt(i-2)?(n=4,t=t.substring(0,i-2)):(n=2,t=t.substring(0,i-1)));for(var o=[],r=0,a=t.length;r<a;++r)for(var s=t.charAt(r),c=0,l=e.length;c<l;++c)if(s==e[c]){var u=this._toBinary(c),p=u.length;if(6-p>0)for(var h=6-p;h>0;--h)u.unshift(0);o=o.concat(u);break}n>0&&(o=o.slice(0,o.length-n));var d=[],f=[];for(r=0,a=o.length;r<a;)if(0==o[r])d=d.concat(this._toDecimal(o.slice(r,r+8))),r+=8;else{for(var m=0;r<a&&1==o[r];)++m,++r;for(f=f.concat(o.slice(r+1,r+8-m)),r+=8-m;m>1;)f=f.concat(o.slice(r+2,r+8)),r+=8,--m;d=d.concat(this._toDecimal(f)),f=[]}return d},_toBinary:function(t){for(var e=new Array;t>0;){var i=t%2;t=Math.floor(t/2),e.push(i)}return e.reverse(),e},_toDecimal:function(t){for(var e=0,i=0,n=t.length-1;n>=0;--n){1==t[n]&&(e+=Math.pow(2,i)),++i}return e}},onLoad:function(){}}),cc._RF.pop()},{}],BeiMiCard:[function(t,e,i){"use strict";cc._RF.push(e,"98564jYdD5LFJWUjTOZJZYQ","BeiMiCard");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{card:cc.Integer,initcard:{default:null,type:cc.Node},normal:{default:null,type:cc.Node},lefttop:{default:null,type:cc.Node},leftcolor:{default:null,type:cc.Node},rightbottom:{default:null,type:cc.Node},rightcolor:{default:null,type:cc.Node},kingbg:{default:null,type:cc.Node},king:{default:null,type:cc.Node},atlas:{default:null,type:cc.SpriteAtlas}},proxy:function(t){this.game=t},onLoad:function(){this.initcard.active=!0,this.normal.active=!1,this.selected=!1,this.kingbg.active=!1},setCard:function(t){this.card=t,this.normal.y=0,this.normal.active=!1,this.kingbg.y=0,this.kingbg.active=!1},unselected:function(){this.selected&&(this.card>=52?this.kingbg.y=0:this.normal.y=0),this.selected=!1},doselect:function(){0==this.selected?(this.card>=52?this.kingbg.y=this.kingbg.y+30:this.normal.y=this.normal.y+30,this.selected=!0):this.unselected()},order:function(){var t,e;if(this.card<52){var i=this.card+1;i%4==0?t=this.atlas.getSpriteFrame("\u65b9\u7247"):i%4==1?t=this.atlas.getSpriteFrame("\u9ed1\u6843"):i%4==2?t=this.atlas.getSpriteFrame("\u7ea2\u5fc3"):i%4==3&&(t=this.atlas.getSpriteFrame("\u6885\u82b1"));var n=(this.card-this.card%4)/4+1+2;14==n?n=1:15==n&&(n=2),e=this.card%2==0?this.atlas.getSpriteFrame(n):this.atlas.getSpriteFrame("r"+n),this.leftcolor.getComponent(cc.Sprite).spriteFrame=t,this.lefttop.getComponent(cc.Sprite).spriteFrame=e,this.rightcolor.getComponent(cc.Sprite).spriteFrame=t,this.rightbottom.getComponent(cc.Sprite).spriteFrame=e,this.initcard.active=!1,this.normal.active=!0,this.kingbg.active=!1,this.normal.y=0}else 52==this.card?(t=this.atlas.getSpriteFrame("\u5c0f\u738b_\u5927"),this.king.getComponent(cc.Sprite).spriteFrame=t,this.initcard.active=!1,this.normal.active=!1,this.kingbg.active=!0,this.kingbg.y=0):53==this.card&&(t=this.atlas.getSpriteFrame("\u5927\u738b_\u5927"),this.king.getComponent(cc.Sprite).spriteFrame=t,this.initcard.active=!1,this.normal.active=!1,this.kingbg.active=!0,this.kingbg.y=0)},reset:function(){this.normal.y=0,this.kingbg.y=0,this.normal.active=!1,this.kingbg.active=!1}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],BeiMiCommon:[function(t,e,i){"use strict";cc._RF.push(e,"4442aLvATdDQqqq9ihQ2QP7","BeiMiCommon"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.beimi.room_callback=null},ready:function(){var t=!1;return cc.beimi?t=!0:this.scene("login",this),t},connect:function(){var t=this;null!=cc.beimi.socket&&(cc.beimi.socket.disconnect(),cc.beimi.socket=null),cc.beimi.socket=window.io.connect(cc.beimi.http.wsURL+"/bm/game",{reconnection:!0});var e={token:cc.beimi.authorization,orgi:cc.beimi.user.orgi};return cc.game.on(cc.game.EVENT_HIDE,function(t){}),cc.game.on(cc.game.EVENT_SHOW,function(t){console.log("SHOW TRUE")}),cc.beimi.socket.on("connect",function(t){console.log("connected to server")}),cc.beimi.socket.on("disconnect",function(t){console.log("disconnected from server")}),cc.beimi.socket.emit("gamestatus",JSON.stringify(e)),cc.beimi.socket.on("gamestatus",function(e){if(null!=e){var i=t.parse(e);null!=cc.beimi.extparams&&("playing"==i.gamestatus&&null!=i.gametype?(null!=cc.beimi.extparams&&(cc.beimi.extparams.playway=i.playway,cc.beimi.extparams.gametype=i.gametype,null!=i.cardroom&&1==i.cardroom&&(cc.beimi.extparams.gamemodel="room")),t.scene(i.gametype,t)):"timeout"==i.gamestatus?(cc.beimi.sessiontimeout=!0,t.alert("\u767b\u5f55\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55")):t.scene(cc.beimi.extparams.gametype,t)),cc.beimi.gamestatus=i.gamestatus}}),cc.beimi.socket.on("searchroom",function(e){null!=e&&null!=cc.beimi.room_callback&&cc.beimi.room_callback(e,t)}),cc.beimi.socket},disconnect:function(){null!=cc.beimi.socket&&(cc.beimi.socket.disconnect(),cc.beimi.socket=null)},registercallback:function(t){cc.beimi.room_callback=t},cleancallback:function(){cc.beimi.room_callback=null},getCommon:function(t){return cc.find("Canvas/script/"+t).getComponent(t)},loadding:function(){cc.beimi.loadding.size()>0&&(this.loaddingDialog=cc.beimi.loadding.get(),this.loaddingDialog.parent=cc.find("Canvas"),this._animCtrl=this.loaddingDialog.getComponent(cc.Animation),this._animCtrl.play("loadding").wrapMode=cc.WrapMode.Loop)},alert:function(t){if(cc.beimi.dialog.size()>0){this.alertdialog=cc.beimi.dialog.get(),this.alertdialog.parent=cc.find("Canvas");var e=this.alertdialog.getChildByName("message");null!=e&&e.getComponent(cc.Label)&&(e.getComponent(cc.Label).string=t)}this.closeloadding()},closeloadding:function(){cc.find("Canvas/loadding")&&cc.beimi.loadding.put(cc.find("Canvas/loadding"))},closeOpenWin:function(){null!=cc.beimi.openwin&&(cc.beimi.openwin.destroy(),cc.beimi.openwin=null)},pvalistener:function(t,e){cc.beimi.listener=e,cc.beimi.context=t},cleanpvalistener:function(){cc&&cc.beimi&&(cc.beimi.listener=null,cc.beimi.context=null)},pva:function(t,e){null!=t&&("gold"==t?cc.beimi.user.goldcoins=e:"cards"==t?cc.beimi.user.cards=e:"diamonds"==t&&(cc.beimi.user.diamonds=e))},updatepva:function(){null!=cc.beimi.listener&&null!=cc.beimi.context&&cc.beimi.listener(cc.beimi.context)},resize:function(){var t=cc.director.getWinSize();cc.view.setDesignResolutionSize(t.width,t.height,cc.ResolutionPolicy.EXACT_FIT)},closealert:function(){cc.find("Canvas/alert")&&cc.beimi.dialog.put(cc.find("Canvas/alert"))},scene:function(t,e){cc.director.preloadScene(t,function(){cc.beimi&&e.closeloadding(e.loaddingDialog),cc.director.loadScene(t)})},preload:function(t,e){this.loadding(),cc.beimi.extparams=t;var i={token:cc.beimi.authorization,orgi:cc.beimi.user.orgi};cc.beimi.socket.emit("gamestatus",JSON.stringify(i))},root:function(){return cc.find("Canvas")},decode:function(e){var i=new Array;if(cc.sys.isNative){var n=t("Base64").decode(e);if(n&&n.length>0)for(r=0;r<n.length;r++)i[r]=n[r]}else for(var o=new DataView(e),r=0;r<e.byteLength;r++)i[r]=o.getInt8(r);return i},parse:function(t){return cc.sys.isNative?JSON.parse(t):t},reset:function(t,e){cc.beimi.authorization=t.token.id,cc.beimi.user=t.data,cc.beimi.games=t.games,cc.beimi.gametype=t.gametype,cc.beimi.data=t,cc.beimi.playway=null,this.io.put("userinfo",e)},logout:function(){this.closeOpenWin(),cc.beimi.authorization=null,cc.beimi.user=null,cc.beimi.games=null,cc.beimi.playway=null,this.disconnect()},socket:function(){var t=cc.beimi.socket;return null==t&&(t=this.connect()),t},map:function(t,e){null!=cc.beimi&&null==cc.beimi.routes[t]&&(cc.beimi.routes[t]=e||function(){})},cleanmap:function(){if(null!=cc.beimi&&null!=cc.beimi.routes)for(var t in cc.beimi.routes)delete cc.beimi.routes[t]},route:function(t){return cc.beimi.routes[t]||function(){}},layout:function(t,e){if(null!=t){for(var i=new Array,n=t.children,o=0;o<n.length;o++)i.push(n[o]);for(o=0;o<i.length;o++)t.removeChild(i[o]);i.sort(e);for(o=0;o<i.length;o++)i[o].parent=t;i.splice(0,i.length)}}}),cc._RF.pop()},{Base64:"Base64"}],BeiMiDialog:[function(t,e,i){"use strict";cc._RF.push(e,"7c2f5/wtw5P0LyzuKEzV2dP","BeiMiDialog");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation()}),this.node.on("close",function(t){null!=cc.beimi&&1==cc.beimi.sessiontimeout&&(cc.beimi.sessiontimeout=null,self.scene("login",self)),t.stopPropagation()})},onClose:function(){var t=cc.find("Canvas/alert");cc.beimi.dialog.put(t),this.node.dispatchEvent(new cc.Event.EventCustom("close",!0))}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],BeiMiQR:[function(t,e,i){"use strict";cc._RF.push(e,"cfbb8w3UbVOA4QUUKGuCXS8","BeiMiQR");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{qrgraphics:{default:null,type:cc.Node},roomid:{default:null,type:cc.Label}},onLoad:function(){},init:function(t){null!=t&&""!=t&&(this.roomid.string="\u8ba9\u597d\u53cb\u626b\u63cf\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4\u53f7\uff1a"+t);var e=new QRCode(6,QRErrorCorrectLevel.H);e.addData(t),e.make();var i=this.qrgraphics.width,n=e.getModuleCount(),o=this.qrgraphics.getComponent(cc.Graphics);o.clear(),o.fillColor=cc.Color.BLACK;for(var r=i/n,a=i/n,s=0;s<n;s++)for(var c=0;c<n;c++)if(e.isDark(s,c)){var l=Math.ceil((c+1)*r)-Math.floor(c*r),u=Math.ceil((s+1)*r)-Math.floor(s*r);o.rect(Math.round(c*r),i-a-Math.round(s*a),l,u),o.fill()}}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],BeiMiRoomOption:[function(t,e,i){"use strict";cc._RF.push(e,"214d0MHSC5DcoE4sSZlfyz2","BeiMiRoomOption");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{playway:{default:null,type:cc.Node}},onLoad:function(){},onClick:function(){if(null!=this.playway){var t=this.playway.getComponent("RoomPlayway"),e=cc.instantiate(t.roomoption);cc.beimi.openwin=e,cc.beimi.openwin.parent=this.root();var i=e.getComponent("RoomOption");null!=i&&i.init(t.data)}}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],BeiMiTimer:[function(t,e,i){"use strict";cc._RF.push(e,"39256C0d5RLXatej7GTm9/q","BeiMiTimer");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{text:{default:null,type:cc.Label}},onLoad:function(){},init:function(t,e,i){var n=this;this.remaining=e,this.text.string=t+"\uff08"+this.remaining+"\uff09",this.schedule(function(){this.remaining=this.remaining-1,this.remaining<0?n.unschedule(this):n.text.string=t+"\uff08"+this.remaining+"\uff09"},1,e)},stop:function(t){this.remaining=0,t.destroy()}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],DefaultHallDataBind:[function(t,e,i){"use strict";cc._RF.push(e,"4b325WE1kpIToU13vjdwCfd","DefaultHallDataBind");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{username:{default:null,type:cc.Label},goldcoins:{default:null,type:cc.Label},cards:{default:null,type:cc.Label},girl:{default:null,type:cc.Node}},onLoad:function(){this.ready()&&(this.username.string=cc.beimi.user.username,this.pva_format(cc.beimi.user.goldcoins,cc.beimi.user.cards,cc.beimi.user.diamonds,this),this.pvalistener(this,function(t){t.pva_format(cc.beimi.user.goldcoins,cc.beimi.user.cards,cc.beimi.user.diamonds,t)}))},pva_format:function(t,e,i,n){if(t>9999){var o=t/1e4;n.goldcoins.string=o.toFixed(2)+"\u4e07"}else n.goldcoins.string=t;n.cards.string=e+"\u5f20"},playToLeft:function(){this._girlAnimCtrl=this.girl.getComponent(cc.Animation),this._girlAnimCtrl.play("girl_to_left")},playToRight:function(){this._girlAnimCtrl=this.girl.getComponent(cc.Animation),this._girlAnimCtrl.play("girl_to_right")},onDestroy:function(){this.cleanpvalistener()}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],DeskCards:[function(t,e,i){"use strict";cc._RF.push(e,"b8da7m1o6lOnpZbARNcuqt/","DeskCards"),cc.Class({extends:cc.Component,properties:{atlas:{default:null,type:cc.SpriteAtlas},beimi0:{default:null,type:cc.SpriteAtlas},cardvalue:{default:null,type:cc.Node},target:{default:null,type:cc.Node}},init:function(t){this.value=t;var e,i=parseInt(this.value/4),n=parseInt(i/9),o=void 0;i<0?o="wind"+(i+8):0==n?o="wan"+(parseInt(this.value%36/4)+1):1==n?o="tong"+(parseInt(this.value%36/4)+1):2==n&&(o="suo"+(parseInt(this.value%36/4)+1)),e=this.atlas.getSpriteFrame("\u724c\u9762-"+o),this.cardvalue.getComponent(cc.Sprite).spriteFrame=e}}),cc._RF.pop()},{}],DiZhuSummaryClick:[function(t,e,i){"use strict";cc._RF.push(e,"4e980BPHPtCgozJhOw88LZe","DiZhuSummaryClick"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onBegin:function(){this.node.dispatchEvent(new cc.Event.EventCustom("begin",!0))},opendeal:function(){this.node.dispatchEvent(new cc.Event.EventCustom("opendeal",!0))},onClose:function(){this.node.dispatchEvent(new cc.Event.EventCustom("close",!0))}}),cc._RF.pop()},{}],DialogClick:[function(t,e,i){"use strict";cc._RF.push(e,"a07b3XLiwVBk5RFzHmd50Gx","DialogClick");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){},onClick:function(t){t.stopPropagation()},onCloseClick:function(){this.closeOpenWin()}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],DizhuBegin:[function(t,e,i){"use strict";cc._RF.push(e,"cc414fafx1EfIEhdfVAesnW","DizhuBegin");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{gamebtn:{default:null,type:cc.Node},continuegamebtn:{default:null,type:cc.Node},poker:{default:null,type:cc.Node},lastCardsPanel:{default:null,type:cc.Node},waitting:{default:null,type:cc.Prefab},ratio:{default:null,type:cc.Label},summary_win:{default:null,type:cc.Prefab},summary:{default:null,type:cc.Prefab},inviteplayer:{default:null,type:cc.Prefab}},onLoad:function(){this.resize(),this.player=new Array,this.pokercards=new Array,this.lastcards=new Array,this.lastCardsPanel.active=!1,this.summarypage=null,this.inited=!1,this.lasttip=null,null!=cc.beimi&&(null!=cc.beimi.gamestatus&&"playing"==cc.beimi.gamestatus?this.recovery():null!=cc.beimi.extparams&&"room"==cc.beimi.extparams.gamemodel&&(this.invite=cc.instantiate(this.inviteplayer)),this.initgame())},begin:function(){null!=cc.beimi.data&&1==cc.beimi.data.enableai?this.statictimer("\u6b63\u5728\u5339\u914d\u73a9\u5bb6",cc.beimi.data.waittime):this.statictimer("\u6b63\u5728\u5339\u914d\u73a9\u5bb6\uff0c\u8bf7\u7a0d\u5019",cc.beimi.data.noaiwaitime),this.startgame("false")},opendeal:function(){null!=cc.beimi.data&&1==cc.beimi.data.enableai?this.statictimer("\u6b63\u5728\u5339\u914d\u73a9\u5bb6",cc.beimi.data.waittime):this.statictimer("\u6b63\u5728\u5339\u914d\u73a9\u5bb6\uff0c\u8bf7\u7a0d\u5019",cc.beimi.data.noaiwaitime),this.startgame("true")},recovery:function(){this.statictimer("\u6b63\u5728\u6062\u590d\u6570\u636e\uff0c\u8bf7\u7a0d\u5019",cc.beimi.data.waittime)},initgame:function(){var t=this;if(this.gamebtn.active=!0,this.continuegamebtn.active=!1,this.ready()){var e=this.socket();this.game=this.getCommon("DizhuDataBind"),this.map("joinroom",this.joinroom_event),this.map("players",this.players_event),this.map("catch",this.catch_event),this.map("catchresult",this.catchresult_event),this.map("lasthands",this.lasthands_event),this.map("takecards",this.takecards_event),this.map("ratio",this.ratio_event),this.map("play",this.play_event),this.map("allcards",this.allcards_event),this.map("cardtips",this.cardtips_event),this.map("roomready",this.roomready_event),this.map("playeready",this.playeready_event),this.map("cardtips",this.cardtips_event),this.map("recovery",this.recovery_event),e.on("command",function(e){if(cc.beimi.gamestatus="playing",1==t.inited){var i=t.parse(e);t.route(i.command)(i,t)}}),e.on("ping",function(){});var i={token:cc.beimi.authorization,playway:cc.beimi.extparams.playway,orgi:cc.beimi.user.orgi,extparams:cc.beimi.extparams};e.emit("joinroom",JSON.stringify(i)),this.inited=!0}},joinroom_event:function(t,e){1==t.cardroom&&null!=e.inviteplayer&&(e.invite.getComponent("BeiMiQR").init(t.roomid),e.invite.parent=e.root());if(t.player.id&&t.player.id==cc.beimi.user.id)e.index=t.index;else{for(var i=!1,n=0;n<e.player.length;n++){e.player[n].getComponent("PlayerRender").userid==t.player.id&&(i=!0)}0==i&&e.newplayer(e.player.length,e,t.player,e.index+1==t.index)}},roomready_event:function(t,e){1==t.cardroom&&null!=e.invite&&e.invite.destroy()},playeready_event:function(t,e){t.userid==cc.beimi.user.id&&(e.gamebtn.active=!1)},players_event:function(t,e){for(var i=-1,n=0;n<t.player.length;n++)if(t.player[n].id==cc.beimi.user.id){i=n;break}if(t.player.length>1&&i>=0)for(var o=i+1;o==t.player.length&&(o=0),0==e.playerexist(t.player[o],e)&&e.newplayer(e.player.length,e,t.player[o],0==e.player.length&&!(0==o&&t.player.length<t.maxplayers)),o!=i;)o+=1},playerexist:function(t,e){var i=!1;if(t.id==cc.beimi.user.id)i=!0;else for(var n=0;n<e.player.length;n++)if(e.player[n].id==t.id){i=!0;break}return i},catch_event:function(t,e){if(e.ratio&&(e.ratio.string=t.ratio+"\u500d"),t.userid==cc.beimi.user.id)e.game.catchtimer(15);else for(var i=0;i<e.player.length;i++){var n=e.player[i].getComponent("PlayerRender");if(n.userid&&n.userid==t.userid){n.catchtimer(15);break}}},recovery_event:function(t,e){var i=e.decode(t.player.cards);if(null!=e.waittimer){var n=e.waittimer.getComponent("BeiMiTimer");n&&n.stop(e.waittimer)}e.gamebtn.active=!1,e.ratio&&(e.ratio.string=t.ratio+"\u500d"),e.doLastCards(e.game,e,3,0);for(var o=0;o<i.length;o++){var r=e.playcards(e.game,e,50*o-300,i[o]);e.registerProxy(r)}for(var a=0;a<e.pokercards.length;a++){e.pokercards[a].getComponent("BeiMiCard").order()}if(e.lastCardsPanel.active=!0,t.lasthands){var s=e.decode(t.lasthands);for(a=0;a<e.lastcards.length;a++){var c=e.lastcards[a].getComponent("BeiMiCard");c.setCard(s[a]),c.order()}t.banker.userid==cc.beimi.user.id?e.game.lasthands(e,e.game,t.data):e.getPlayer(t.banker.userid).setDizhuFlag(t.data)}if(null!=t.last){var l=e.decode(t.last.cards);t.last.userid==cc.beimi.user.id?e.game.lasttakecards(e.game,e,t.last.cardsnum,l,t.last):e.getPlayer(t.last.userid).lasttakecards(e.game,e,t.last.cardsnum,l,t.last),t.nextplayer==cc.beimi.user.id?e.game.playtimer(e.game,25,t.automic):e.getPlayer(t.nextplayer).playtimer(e.game,25)}if(null!=t.cardsnum&&t.cardsnum.length>0)for(a=0;a<t.cardsnum.length;a++)e.getPlayer(t.cardsnum[a].userid).resetcards(t.cardsnum[a].cardsnum)},ratio_event:function(t,e){1==t.king||t.bomb,e.ratio&&(e.ratio.string=t.ratio+"\u500d")},catchresult_event:function(t,e){e.ratio&&(e.ratio.string=t.ratio+"\u500d"),t.userid==cc.beimi.user.id?e.game.catchresult(t):setTimeout(function(){e.getPlayer(t.userid).catchresult(t)},1500)},lasthands_event:function(t,e){for(var i=e.decode(t.lasthands),n=0;n<e.lastcards.length;n++){var o=e.lastcards[n].getComponent("BeiMiCard");o.setCard(i[n]),o.order()}if(t.userid==cc.beimi.user.id){e.game.lasthands(e,e.game,t);for(var r=0;r<e.player.length;r++){e.player[r].getComponent("PlayerRender").hideresult()}for(n=0;n<i.length;n++){var a=null;n==i.length-1&&(a=cc.callFunc(function(t,e){e.tempcontext&&e.tempcontext.layout(e.tempcontext.poker,function(t,e){return t.zIndex-e.zIndex})},this,{tempcontext:e}));var s=e.current(e.game,e,600+50*(6+n)-300,i[n],a);s.getComponent("BeiMiCard").order(),e.registerProxy(s)}e.game.playtimer(e.game,25,!0)}else{e.game.hideresult();for(r=0;r<e.player.length;r++){e.player[r].getComponent("PlayerRender").hideresult()}e.getPlayer(t.userid).lasthands(e,e.game,t),e.getPlayer(t.userid).playtimer(e.game,25)}for(r=0;r<e.pokercards.length;r++){var c=e.pokercards[r];c.zIndex=54-c.card}},takecards_event:function(t,e){var i;(e.lasttip=null,1==t.allow)?(0==t.donot&&(i=e.decode(t.cards)),t.userid==cc.beimi.user.id?(e.game.unselected(e,e.game),e.game.lasttakecards(e.game,e,t.cardsnum,i,t)):e.getPlayer(t.userid).lasttakecards(e.game,e,t.cardsnum,i,t),e.game.selectedcards.splice(0,e.game.selectedcards.length),0==t.over&&(t.nextplayer==cc.beimi.user.id?e.game.playtimer(e.game,25,t.automic):e.getPlayer(t.nextplayer).playtimer(e.game,25))):(e.game.notallow.active=!0,setTimeout(function(){e.game.notallow.active=!1},2e3),e.game.unselected(e,e.game))},cardtips_event:function(t,e){if(e.game.unselected(e,e.game),1==t.allow){var i=e.decode(t.cards);e.lasttip=i.join(",");for(var n=0;n<i.length;n++)e.game.cardtips(e,i[n],i)}else e.game.cardtipsfornot(e,e.game)},play_event:function(t,e){cc.beimi.gamestatus="playing";var i=e.decode(t.player.cards);if(e.waittimer){var n=e.waittimer.getComponent("BeiMiTimer");n&&n.stop(e.waittimer)}var o=e.game.pokerpool.get(),r=e.game.pokerpool.get(),a=e.game.pokerpool.get();o.parent=e.root(),r.parent=e.root(),a.parent=e.root(),o.setPosition(0,200),r.setPosition(0,200),a.setPosition(0,200);var s=cc.callFunc(function(t,e){if(e.game){e.game.pokerpool.put(e.current),e.game.pokerpool.put(e.left),e.game.pokerpool.put(e.right);for(var i=0;i<e.self.pokercards.length;i++){e.self.pokercards[i].getComponent("BeiMiCard").order()}e.self.lastCardsPanel.active=!0}},this,{game:e.game,self:e,left:r,right:a,current:o});e.doLastCards(e.game,e,3,0),setTimeout(function(){e.dealing(e.game,6,e,0,r,a,i),setTimeout(function(){e.dealing(e.game,6,e,1,r,a,i),setTimeout(function(){e.dealing(e.game,5,e,2,r,a,i,s),e.reordering(e)},500)},500)},0)},allcards_event:function(t,e){cc.beimi.gamestatus="notready";for(var i=void 0,n=0;n<t.players.length;n++){var o=t.players[n];if(o.userid!=cc.beimi.user.id)for(var r=e.decode(o.cards),a=(e.getPlayer(o.userid),0);a<r.length;a++);else i=o}null!=i&&(e.pva("gold",i.balance),e.updatepva()),setTimeout(function(){null!=i&&(1==i.win?e.summarypage=cc.instantiate(e.summary_win):e.summarypage=cc.instantiate(e.summary),e.summarypage.parent=e.root(),e.summarypage.getComponent("SummaryDetail").create(e,t));if(e.lastCardsPanel.active=!1,1==t.gameRoomOver){for(var n=0;n<e.player.length;n++)e.player[n].destroy();e.player.splice(0,e.player.length),e.player=new Array,e.clean()}},2e3)},getPlayer:function(t){for(var e,i=0;i<this.player.length;i++){var n=this.player[i].getComponent("PlayerRender");if(n.userid&&n.userid==t){e=n;break}}return e},dealing:function(t,e,i,n,o,r,a,s){for(var c=0;c<e;c++){var l=i.current(t,i,300*n+50*c-300,a[6*n+c],s);this.registerProxy(l)}i.otherplayer(o,0,e,t,i),i.otherplayer(r,1,e,t,i)},otherplayer:function(t,e,i,n,o){if(0==e){var r=cc.sequence(cc.spawn(cc.moveTo(.2,-350,50),cc.scaleTo(.2,.3,.3)),cc.moveTo(0,0,200),cc.scaleTo(0,1,1));t.runAction(r)}else{var a=cc.sequence(cc.spawn(cc.moveTo(.2,350,50),cc.scaleTo(.2,.3,.3)),cc.moveTo(0,0,200),cc.scaleTo(0,1,1));t.runAction(a)}for(var s=o.player[e].getComponent("PlayerRender"),c=0;c<i;c++)s.countcards(1)},doLastCards:function(t,e,i,n){for(var o=0;o<i;o++){var r=80*o-80,a=t.minpokerpool.get();a.getComponent("BeiMiCard").setCard(n),a.card=n,a.parent=this.lastCardsPanel,a.setPosition(r,0),e.lastcards[e.lastcards.length]=a}},registerProxy:function(t){t&&t.getComponent("BeiMiCard").proxy(this.game)},playcards:function(t,e,i,n){return e.current(t,e,i,n,null)},current:function(t,e,i,n,o){var r=t.pokerpool.get();if(r.getComponent("BeiMiCard").setCard(n),r.card=n,r.parent=e.poker,r.setPosition(0,200),r.setScale(1,1),r.zIndex=100-n,e.pokercards.push(r),null!=o){var a=cc.sequence(cc.moveTo(.2,i,-180),o);r.runAction(a)}else{var s=cc.moveTo(.2,i,-180);r.runAction(s)}return r},reordering:function(t){for(var e=0;e<t.pokercards.length;e++)t.pokercards[e].parent=t.poker},newplayer:function(t,e,i,n){var o=cc.v2(520,100);0==n&&(o=cc.v2(-520,100));var r=e.getCommon("DizhuDataBind");r&&r.playerspool.size()>0&&(e.player[t]=r.playerspool.get(),e.player[t].parent=e.root(),e.player[t].setPosition(o),e.player[t].getComponent("PlayerRender").initplayer(i,n))},givup:function(){this.ready()&&this.socket().emit("giveup","giveup")},startgame:function(t){this.ready()&&this.socket().emit("start",t)},cardtips:function(){if(this.ready()){var t=this.socket();null!=this.lasttip?t.emit("cardtips",this.lasttip):t.emit("cardtips",""),this.lasttip=null}},docatch:function(){this.ready()&&this.socket().emit("docatch","docatch")},doPlayCards:function(){if(this.ready()){var t=this.socket();this.game.selectedcards.splice(0,this.game.selectedcards.length);for(var e=0;e<this.pokercards.length;e++){var i=this.pokercards[e].getComponent("BeiMiCard");1==i.selected&&this.game.selectedcards.push(i.card)}t.emit("doplaycards",this.game.selectedcards.join())}this.lasttip=null},noCards:function(){this.ready()&&this.socket().emit("nocards","nocards");this.lasttip=null},clean:function(){for(var t=0;t<this.pokercards.length;t++){var e=this.pokercards[t];this.game.pokerpool.put(e)}this.pokercards.splice(0,this.pokercards.length);for(var i=0;i<this.lastcards.length;i++)this.game.minpokerpool.put(this.lastcards[i]);this.lastcards.splice(0,this.lastcards.length);for(i=0;i<this.player.length;i++){this.player[i].getComponent("PlayerRender").clean(this.game)}this.player.splice(0,this.player.length),this.game.clean(this),this.ratio.string="15\u500d"},onCloseClick:function(){this.continuegamebtn.active=!0},restart:function(t){(this.game.restart(),this.statictimer("\u6b63\u5728\u5339\u914d\u73a9\u5bb6",5),this.ready())&&this.socket().emit("restart",t)},continuegame:function(){this.continuegamebtn.active=!1,this.restart("begin")},statictimer:function(t,e){this.waittimer=cc.instantiate(this.waitting),this.waittimer.parent=this.root();var i=this.waittimer.getComponent("BeiMiTimer");i&&i.init(t,e,this.waittimer)},onDestroy:function(){(this.inited=!1,this.cleanmap(),this.ready())&&this.socket().emit("leave","leave")}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],DizhuButton:[function(t,e,i){"use strict";cc._RF.push(e,"74593mJuotD0Y/H/yjldfAs","DizhuButton");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){},back:function(){this.loadding();var t=this;setTimeout(function(){t.scene(cc.beimi.gametype,t)},500)}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],DizhuDataBind:[function(t,e,n){"use strict";cc._RF.push(e,"eb412rJilJPFo/eaLVo2ey6","DizhuDataBind");var o=t("BeiMiCommon");cc.Class({extends:o,properties:{goldcoins:{default:null,type:cc.Label},cards:{default:null,type:cc.Label},player:{default:null,type:cc.Prefab},poker:{default:null,type:cc.Prefab},poker_min:{default:null,type:cc.Prefab},myself:{default:null,type:cc.Prefab},atlas:{default:null,type:cc.SpriteAtlas},catchbtn:{default:null,type:cc.Node},timer:{default:null,type:cc.Node},timer_num:{default:null,type:cc.Label},lastcards:{default:null,type:cc.Node},playbtn:{default:null,type:cc.Node},notallow:{default:null,type:cc.Node},operesult:{default:null,type:cc.Node},donottake:{default:null,type:cc.Node},cardtipmsg:{default:null,type:cc.Node}},onLoad:function(){for(this.timer&&(this.timer.active=!1),this.catchbtn&&(this.catchbtn.active=!1),this.playbtn&&(this.playbtn.active=!1),this.notallow&&(this.notallow.active=!1),this.operesult&&(this.operesult.active=!1),this.cardtipmsg&&(this.cardtipmsg.active=!1),this.playerspool=new cc.NodePool,this.myselfpool=new cc.NodePool,this.pokerpool=new cc.NodePool,this.minpokerpool=new cc.NodePool,this.selectedcards=new Array,this.cardslist=new Array,i=0;i<2;i++)this.playerspool.put(cc.instantiate(this.player));for(i=0;i<25;i++)this.pokerpool.put(cc.instantiate(this.poker));for(i=0;i<60;i++)this.minpokerpool.put(cc.instantiate(this.poker_min));(this.myselfpool.put(cc.instantiate(this.myself)),this.ready()&&(this.pva_format(cc.beimi.user.goldcoins,cc.beimi.user.cards,cc.beimi.user.diamonds,this),this.pvalistener(this,function(t){t.pva_format(cc.beimi.user.goldcoins,cc.beimi.user.cards,cc.beimi.user.diamonds,t)})),this.myselfpool.size()>0&&null!=cc.beimi)&&(this.playermysql=this.myselfpool.get(),this.playermysql.parent=this.root(),this.playermysql.setPosition(-520,-180),this.playermysql.getComponent("PlayerRender").initplayer(cc.beimi.user))},pva_format:function(t,e,i,n){if(t>9999){var o=t/1e4;n.goldcoins.string=o.toFixed(2)+"\u4e07"}else n.goldcoins.string=t;n.cards.string=e+"\u5f20"},catchtimer:function(e){this.playbtn&&(this.playbtn.active=!1),this.timer&&(this.timer.active=!0),this.catchbtn&&(this.catchbtn.active=!0),this.operesult&&(this.operesult.active=!1);var i=t("GameTimer");this.beimitimer=new i,this.timesrc=this.beimitimer.runtimer(this,this.timer,this.atlas,this.timer_num,this.timer_num,e)},catchresult:function(t){this.timer&&(this.timer.active=!1),this.catchbtn&&(this.catchbtn.active=!1),this.playbtn&&(this.playbtn.active=!1),this.timesrc&&this.beimitimer.stoptimer(this,this.timer,this.timesrc),this.doOperatorResult("catch",t.docatch,!1)},hideresult:function(){this.operesult&&(this.operesult.active=!1)},lasthands:function(t,e,i){this.setDizhuFlag(i),this.operesult&&(this.operesult.active=!1)},setDizhuFlag:function(t){this.playermysql.getComponent("PlayerRender").setDizhuFlag(t)},lasttakecards:function(t,e,i,n,o){this.result&&(this.result.active=!1),this.playbtn&&(this.playbtn.active=!1),this.catchbtn&&(this.catchbtn.active=!1),this.jsq&&(this.jsq.active=!1),this.lastcards&&(this.lastcards.active=!0),this.timesrc&&this.beimitimer.stoptimer(this,this.timer,this.timesrc);for(var r=0;r<this.cardslist.length;r++)this.pokerpool.put(this.cardslist[r]);if(this.cardslist.splice(0,this.cardslist.length),0==o.donot){for(r=0;r<n.length;r++)this.playcards(e,r,n[r],n);this.layout(this.lastcards,function(t,e){return t.zIndex-e.zIndex})}else this.doOperatorResult("lasttakecards",!0,o.sameside)},cardtips:function(t,e,i){for(var n,o=0;o<t.pokercards.length;o++){var r=t.pokercards[o];if(r.getComponent("BeiMiCard").card==e){n=r;break}}null!=n&&n.getComponent("BeiMiCard").doselect()},cardtipsfornot:function(t,e){e.cardtipmsg.active=!0,setTimeout(function(){e.cardtipmsg.active=!1},1e3),e.unselected(t,e)},unselected:function(t,e){for(var i=0;i<t.pokercards.length;i++){t.pokercards[i].getComponent("BeiMiCard").unselected()}},playcards:function(t,e,i,n){for(var o,r=0;r<t.pokercards.length;r++){var a=t.pokercards[r];if(a.card==i){o=a;break}}if(null!=o){o.getComponent("BeiMiCard").unselected(),o.x=30*e-30,o.y=0;var s=this.countcard(i,n);o.zIndex=4-s,o.setScale(.5,.5),o.parent=this.lastcards,this.cardslist.push(o)}},countcard:function(t,e){for(var i=parseInt(t/4),n=0,o=0;o<e.length;o++){i==parseInt(e[o]/4)&&(n+=1)}return n},playtimer:function(e,i,n){this.timer&&(this.timer.active=!0),this.playbtn&&(this.playbtn.active=!0),this.catchbtn&&(this.catchbtn.active=!1),this.lastcards&&(this.lastcards.active=!1),this.operesult&&(this.operesult.active=!1),this.donottake.active=1!=n;for(var o=0;o<this.cardslist.length;o++)e.pokerpool.put(this.cardslist[o]);var r=t("GameTimer");this.beimitimer=new r,this.timesrc=this.beimitimer.runtimer(this,this.timer,this.atlas,this.timer_num,this.timer_num,i)},doOperatorResult:function(t,e,i){if(this.operesult.active=!0,"catch"==t)if(1==e)for(var n=0;n<this.operesult.children.length;n++)this.operesult.children[n].active=!1,"\u63d0\u793a_\u62a2\u5730\u4e3b"==this.operesult.children[n].name&&(this.operesult.children[n].active=!0);else for(n=0;n<this.operesult.children.length;n++)this.operesult.children[n].active=!1,"\u63d0\u793a_\u4e0d\u62a2"==this.operesult.children[n].name&&(this.operesult.children[n].active=!0);else if("lasttakecards"==t)if(1==i)for(n=0;n<this.operesult.children.length;n++)this.operesult.children[n].active=!1,"\u4e0d\u8981"==this.operesult.children[n].name&&(this.operesult.children[n].active=!0);else for(n=0;n<this.operesult.children.length;n++)this.operesult.children[n].active=!1,"\u8981\u4e0d\u8d77"==this.operesult.children[n].name&&(this.operesult.children[n].active=!0)},doSelectCard:function(t){void 0==this.selectedcards.find(function(t){t.card})&&this.selectedcards.push(t)},doUnSelectCard:function(t){var e=this.selectedcards.indexOf(t);e>=0&&this.selectedcards.splice(e,e+1)},clean:function(t){this.catchbtn&&(this.catchbtn.active=!1),this.lastcards&&(this.lastcards.active=!1),this.operesult&&(this.operesult.active=!1),this.playermysql.getComponent("PlayerRender").clean(t)},restart:function(){for(var t=0;t<2;t++)this.playerspool.put(cc.instantiate(this.player));this.pokerpool.clear(),this.minpokerpool.clear();for(var e=0;e<25;e++)this.pokerpool.put(cc.instantiate(this.poker));for(e=0;e<60;e++)this.minpokerpool.put(cc.instantiate(this.poker_min))}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon",GameTimer:"GameTimer"}],EventStop:[function(t,e,i){"use strict";cc._RF.push(e,"ac9b4vOTi9OKqQ68Kuj6+oT","EventStop"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation()})}}),cc._RF.pop()},{}],FeedBackDialog:[function(t,e,i){"use strict";cc._RF.push(e,"789dcDahxtFoaHaAAyS85K3","FeedBackDialog"),cc.Class({extends:cc.Component,properties:{title_feedback:{default:null,type:cc.Node},title_reply:{default:null,type:cc.Node}},onLoad:function(){this.title_feedback.active=!0,this.title_reply.active=!1},onFeedBack:function(){this.title_feedback.active=!0,this.title_reply.active=!1},onReply:function(){this.title_feedback.active=!1,this.title_reply.active=!0}}),cc._RF.pop()},{}],GameMenu:[function(t,e,i){"use strict";cc._RF.push(e,"8ed13WRoL5Mv7fLyNGLHVpu","GameMenu"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},back:function(){}}),cc._RF.pop()},{}],GameRoom:[function(t,e,i){"use strict";cc._RF.push(e,"e9bfb1QJiRAHJZMZ1KPDpqH","GameRoom");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{roomidDialog:{default:null,type:cc.Prefab}},onLoad:function(){},onClick:function(t,e){this.loadding();var i=this;setTimeout(function(){i.scene(e,i)},200)},onClickJoinRoom:function(){this.roomidDialog&&(cc.beimi.openwin=cc.instantiate(this.roomidDialog),cc.beimi.openwin.parent=this.root())}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],GameTimer:[function(t,e,i){"use strict";cc._RF.push(e,"35465tZFoBKsKL/r5rkrS4C","GameTimer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},runtimer:function(t,e,i,n,o,r){var a=this;return this.remaining=r,n.string=r,e&&(e.active=!0),this.timersrc=function(){a.remaining=a.remaining-1,a.remaining<0?(t.unschedule(this),e.active=!1):n.string=a.remaining},t.schedule(this.timersrc,1,r,0),this.timersrc},stoptimer:function(t,e,i){e&&(e.active=!1);this.remaining=0,i&&t.unscheduleAllCallbacks()}}),cc._RF.pop()},{}],GangAction:[function(t,e,i){"use strict";cc._RF.push(e,"0fe67JecMpLz5GGCrRtpy0D","GangAction"),cc.Class({extends:cc.Component,properties:{atlas:{default:null,type:cc.SpriteAtlas},beimi0:{default:null,type:cc.SpriteAtlas},card_one:{default:null,type:cc.Node},card_two:{default:null,type:cc.Node},card_three:{default:null,type:cc.Node},card_four:{default:null,type:cc.Node},card_last:{default:null,type:cc.Node},target:{default:null,type:cc.Node}},onLoad:function(){},init:function(t,e){this.value=t;var i=parseInt(this.value/4),n=parseInt(i/9);this.mjtype=n,this.mjvalue=parseInt(this.value%36/4);var o=void 0,r=void 0;i<0?o="wind"+(i+8):0==n?o="wan"+(parseInt(this.value%36/4)+1):1==n?o="tong"+(parseInt(this.value%36/4)+1):2==n&&(o="suo"+(parseInt(this.value%36/4)+1)),r="suo2"==o?this.beimi0.getSpriteFrame("\u724c\u9762-"+o):this.atlas.getSpriteFrame("\u724c\u9762-"+o),this.card_one.getComponent(cc.Sprite).spriteFrame=r,this.card_two&&(this.card_two.getComponent(cc.Sprite).spriteFrame=r),this.card_three&&(this.card_three.getComponent(cc.Sprite).spriteFrame=r),this.card_four&&(this.card_four.getComponent(cc.Sprite).spriteFrame=r),this.card_last&&(this.card_last.active=0!=e)}}),cc._RF.pop()},{}],HTTP:[function(t,e,i){"use strict";cc._RF.push(e,"bf72714t+NASJp+J1e5wv0I","HTTP"),cc.VERSION=2017061001;var n=cc.Class({extends:cc.Component,properties:{},statics:{baseURL:"http://192.168.1.201:8080",wsURL:"http://192.168.1.201:9081",authorization:null,httpGet:function(t,e,i,o){var r=cc.loader.getXMLHttpRequest();r.onreadystatechange=function(){if(4===r.readyState)if(r.status>=200&&r.status<300){var t=r.responseText;e&&e(t,o)}else i&&i(o)},r.open("GET",n.baseURL+t,!0),null!=n.authorization&&r.setRequestHeader("authorization",n.authorization),cc.sys.isNative&&r.setRequestHeader("Accept-Encoding","gzip,deflate"),r.ontimeout=function(t){i(o)},r.onerror=function(t){i(o)},r.timeout=3e3,r.send()},encodeFormData:function(t){var e=[],i=/%20/g;for(var n in t){var o=t[n].toString(),r=encodeURIComponent(n).replace(i,"+")+"="+encodeURIComponent(o).replace(i,"+");e.push(r)}return e.join("&")},httpPost:function(t,e,i,o,r){var a=cc.loader.getXMLHttpRequest();a.onreadystatechange=function(){if(4===a.readyState)if(a.status>=200&&a.status<300){var t=a.responseText;i&&i(t,r)}else o&&o(r)},a.open("POST",n.baseURL+t,!0),null!==n.authorization&&a.setRequestHeader("authorization",n.authorization),cc.sys.isNative&&a.setRequestHeader("Accept-Encoding","gzip,deflate"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.timeout=5e3,a.send(n.encodeFormData(e))}},onLoad:function(){}});cc._RF.pop()},{}],HandCards:[function(t,e,i){"use strict";cc._RF.push(e,"ea8287c50lMKb/Afb/yUYFR","HandCards"),cc.Class({extends:cc.Component,properties:{atlas:{default:null,type:cc.SpriteAtlas},beimi0:{default:null,type:cc.SpriteAtlas},cardvalue:{default:null,type:cc.Node},target:{default:null,type:cc.Node}},onLoad:function(){this.lastonecard=!1,this.take=!1,this.node.on("mousedown",function(t){console.log("Hello!")}),this.node.on("mousemove",function(t){console.log("Hello Mover!")})},init:function(t){this.value=t;var e=void 0,i=parseInt(this.value/4),n=parseInt(i/9);this.mjtype=n,this.mjvalue=parseInt(this.value%36/4);var o=void 0;this.lastonecard=!1,i<0?o="wind"+(i+8):0==n?o="wan"+(parseInt(this.value%36/4)+1):1==n?o="tong"+(parseInt(this.value%36/4)+1):2==n&&(o="suo"+(parseInt(this.value%36/4)+1)),e="suo2"==o?this.beimi0.getSpriteFrame("\u724c\u9762-"+o):this.atlas.getSpriteFrame("\u724c\u9762-"+o),this.cardvalue.getComponent(cc.Sprite).spriteFrame=e,this.getComponent(cc.Animation).play("majiang_current")},lastone:function(){0==this.lastonecard&&(this.lastonecard=!0,this.target.width=this.target.width+30)},selected:function(){this.target.opacity=168,this.selectcolor=!0},relastone:function(){1==this.lastonecard&&(this.lastonecard=!1,this.target.width=this.target.width-30)},reinit:function(){this.relastone(),this.lastonecard=!1,this.selectcolor=!1,this.target.opacity=255,this.take&&(this.target.y=this.target.y-30,this.take=!1)}}),cc._RF.pop()},{}],IOUtils:[function(t,e,i){"use strict";cc._RF.push(e,"39610X6GEFHlrTGAdd3Wcer","IOUtils"),cc.Class({extends:cc.Component,properties:{},statics:{get:function(t){return cc.sys.localStorage.getItem(t)},put:function(t,e){cc.sys.localStorage.setItem(t,e)},remove:function(t){cc.sys.localStorage.removeItem(t)}}}),cc._RF.pop()},{}],JoinRoomClick:[function(t,e,i){"use strict";cc._RF.push(e,"dca015EOkRD8b5hkhNcAXkU","JoinRoomClick");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{numdata:{default:null,type:cc.Node}},onLoad:function(){this.roomid=new Array},onClick:function(t,e){if(this.roomid.length<6&&(this.roomid.push(e),this.disRoomId()),6==this.roomid.length){if(this.closeOpenWin(),this.ready()){var i=this.socket(),n={token:cc.beimi.authorization,roomid:this.roomid.join(""),orgi:cc.beimi.user.orgi,userid:cc.beimi.user.id};i.emit("searchroom",JSON.stringify(n)),this.registercallback(this.roomCallBack)}this.loadding()}},roomCallBack:function(t,e){var i=e.parse(t);if("ok"==i.result){var n={gametype:i.code,playway:i.id,gamemodel:"room"};e.preload(n,e)}else"notexist"==i.result?e.alert("\u623f\u95f4\u53f7\u4e0d\u5b58\u5728\u3002"):"full"==i.result&&e.alert("\u623f\u95f4\u5df2\u6ee1\u5458\u3002")},onDeleteClick:function(){this.roomid.splice(this.roomid.length-1,this.roomid.length),this.disRoomId()},onCleanClick:function(){this.roomid.splice(0,this.roomid.length),this.disRoomId()},disRoomId:function(){for(var t=this.numdata.children,e=0;e<6;e++)e<this.roomid.length?t[e].children[0].getComponent(cc.Label).string=this.roomid[e]:t[e].children[0].getComponent(cc.Label).string=""}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],JoinRoomEvent:[function(t,e,i){"use strict";cc._RF.push(e,"43eb6PT5ldCaKJaeJn7zVx4","JoinRoomEvent"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],LogoutClick:[function(t,e,i){"use strict";cc._RF.push(e,"c02c1wqe0JFrrSphy0Aek62","LogoutClick");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){},onClick:function(){this.logout(),this.scene("login",this)}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],MJMenuClick:[function(t,e,i){"use strict";cc._RF.push(e,"ce2c1CkWWFBsK4mdw3v5/n2","MJMenuClick");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){},onBackClick:function(){this.scene(cc.beimi.gametype,this)}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],MaJiangPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"e95383hjkFI0LhTixqeMZQ5","MaJiangPlayer"),cc.Class({extends:cc.Component,properties:{username:{default:null,type:cc.Label},goldcoins:{default:null,type:cc.Label},selected:{default:null,type:cc.Node},creator:{default:null,type:cc.Node},selectcards:{default:null,type:cc.Node},selectcolor:{default:null,type:cc.Node}},onLoad:function(){this.selected.active=!1,this.creator.active=!1},init:function(t,e,i){this.data=t,this.tablepos=i,0==e?this.selectcards.parent.x=-1*this.selectcards.parent.x:1==e&&(this.selectcards.parent.x=-1*this.selectcards.parent.x),this.username.string=t.username,this.goldcoins.string=t.goldcoins},banker:function(){this.creator.active=!0},selecting:function(){if(this.data.id!=cc.beimi.user.id){this.selectcards.active=!0;var t=this.selectcolor.getComponent(cc.Animation);this.animState=t.play("majiang_select"),this.animState.wrapMode=cc.WrapMode.Loop,this.animState.repeatCount=20}},selectresult:function(t){for(var e=0;e<this.selected.children.length;e++)this.selected.children[e].active=!1,this.selected.children[e].name==t.color&&(this.selected.children[e].active=!0);this.selected.active=!0,this.data.id!=cc.beimi.user.id&&null!=this.animState&&this.animState.stop("majiang_select")},clean:function(){this.creator.active=!1;for(var t=0;t<this.selected.children.length;t++)this.selected.children[t].active=!1}}),cc._RF.pop()},{}],MaJiangSummary:[function(t,e,i){"use strict";cc._RF.push(e,"1d5bextO+xAqpCMOUoxJgQb","MaJiangSummary"),cc.Class({extends:cc.Component,properties:{workitem:{default:null,type:cc.Node},myscore:{default:null,type:cc.Label},myflag:{default:null,type:cc.Node},player_1:{default:null,type:cc.Node},player_1_flag:{default:null,type:cc.Node},player_1_name:{default:null,type:cc.Label},player_1_score:{default:null,type:cc.Label},player_2:{default:null,type:cc.Node},player_2_flag:{default:null,type:cc.Node},player_2_name:{default:null,type:cc.Label},player_2_score:{default:null,type:cc.Label}},onLoad:function(){var t=this;this.workitem.on("begin",function(e){null!=t.context&&(t.context.summarypage.destroy(),t.context.restart()),e.stopPropagation()}),this.workitem.on("close",function(e){null!=t.context&&t.context.summarypage.destroy(),e.stopPropagation()})},create:function(t,e){this.context=t;for(var i=0;i<e.players.length;i++)e.players[i]}}),cc._RF.pop()},{}],MajiangDataBind:[function(t,e,i){"use strict";cc._RF.push(e,"d95a8lKtJpJP42PDp+oYIJT","MajiangDataBind");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{playerprefab:{default:null,type:cc.Prefab},statebtn:{default:null,type:cc.Node},mjtimer:{default:null,type:cc.Label},desk_tip:{default:null,type:cc.Node},desk_cards:{default:null,type:cc.Label},cards_current:{default:null,type:cc.Prefab},cards_panel:{default:null,type:cc.Node},one_card_panel:{default:null,type:cc.Node},left_panel:{default:null,type:cc.Node},right_panel:{default:null,type:cc.Node},top_panel:{default:null,type:cc.Node},cards_left:{default:null,type:cc.Prefab},cards_right:{default:null,type:cc.Prefab},cards_top:{default:null,type:cc.Prefab},takecards_one:{default:null,type:cc.Prefab},takecards_left:{default:null,type:cc.Prefab},takecards_right:{default:null,type:cc.Prefab},deskcards_current_panel:{default:null,type:cc.Node},deskcards_right_panel:{default:null,type:cc.Node},deskcards_top_panel:{default:null,type:cc.Node},deskcards_left_panel:{default:null,type:cc.Node},searchlight:{default:null,type:cc.Node},actionnode_two:{default:null,type:cc.Node},actionnode_two_list:{default:null,type:cc.Node},actionnode_three:{default:null,type:cc.Node},actionnode_three_list:{default:null,type:cc.Node},actionnode_deal:{default:null,type:cc.Node},action_gang_ming_prefab:{default:null,type:cc.Prefab},action_gang_an_prefab:{default:null,type:cc.Prefab},cards_gang_ming_prefab:{default:null,type:cc.Prefab},cards_gang_an_prefab:{default:null,type:cc.Prefab},roomid:{default:null,type:cc.Label},gang_current:{default:null,type:cc.Node},summary:{default:null,type:cc.Prefab},inviteplayer:{default:null,type:cc.Prefab},hu_cards_current:{default:null,type:cc.Node},hu_cards_top:{default:null,type:cc.Node},hu_cards_left:{default:null,type:cc.Node},hu_cards_right:{default:null,type:cc.Node},mask:{default:null,type:cc.Node}},onLoad:function(){this.initdata(!0),this.resize();var t=this;if(null!=this.mask&&(this.mask.active=!1),this.ready()){var e=this.socket();this.routes={},this.playersarray=new Array,this.playercards=new Array,this.leftcards=new Array,this.rightcards=new Array,this.topcards=new Array,this.deskcards=new Array,this.actioncards=new Array,this.inited=!1,this.centertimer=null,this.summarypage=null,this.exchange_state("init",this),this.node.on("takecard",function(t){var i=t.target.getComponent("TakeMJCard");if(null!=i){var n=i.target.getComponent("HandCards");e.emit("doplaycards",n.value)}t.stopPropagation()}),this.node.on("gang",function(i){t.dealActionProcess(t),e.emit("selectaction","gang"),i.stopPropagation()}),this.node.on("peng",function(i){t.dealActionProcess(t),e.emit("selectaction","peng"),i.stopPropagation()}),this.node.on("chi",function(i){t.dealActionProcess(t),e.emit("selectaction","chi"),i.stopPropagation()}),this.node.on("hu",function(i){t.dealActionProcess(t),e.emit("selectaction","hu"),i.stopPropagation()}),this.node.on("guo",function(i){t.dealActionProcess(t),e.emit("selectaction","guo"),i.stopPropagation()}),null!=cc.beimi&&(null!=cc.beimi.gamestatus&&"playing"==cc.beimi.gamestatus?this.recovery():null!=cc.beimi.extparams&&"room"==cc.beimi.extparams.gamemodel&&(this.invite=cc.instantiate(this.inviteplayer)),this.initgame())}},initgame:function(){var t=this;if(this.ready()){var e=this.socket();this.map("joinroom",this.joinroom_event),this.map("players",this.players_event),this.map("banker",this.banker_event),this.map("play",this.play_event),this.map("selectcolor",this.selectcolor_event),this.map("selectresult",this.selectresult_event),this.map("lasthands",this.lasthands_event),this.map("takecards",this.takecard_event),this.map("action",this.action_event),this.map("selectaction",this.selectaction_event),this.map("dealcard",this.dealcard_event),this.map("allcards",this.allcards_event),this.map("recovery",this.recovery_event),this.map("roomready",this.roomready_event),this.map("playeready",this.playeready_event),e.on("command",function(e){if(cc.beimi.gamestatus="playing",1==t.inited){var i=t.parse(e);t.route(i.command)(i,t)}});var i={token:cc.beimi.authorization,playway:cc.beimi.extparams.playway,orgi:cc.beimi.user.orgi,extparams:cc.beimi.extparams};e.emit("joinroom",JSON.stringify(i)),this.inited=!0}},initdata:function(t){if(1==t){this.playerspool=new cc.NodePool;for(var e=0;e<4;e++)this.playerspool.put(cc.instantiate(this.playerprefab))}this.cardpool=new cc.NodePool;for(e=0;e<14;e++)this.cardpool.put(cc.instantiate(this.cards_current))},joinroom_event:function(t,e){1==t.cardroom&&null!=e.inviteplayer?(e.invite.getComponent("BeiMiQR").init(t.roomid),e.invite.parent=e.root(),null!=e.roomid&&(e.roomid.string=t.roomid)):null!=e.roomid&&(e.roomid.string="\u5927\u5385\u623f\u95f4");var i=e.playerspool.get(),n=i.getComponent("MaJiangPlayer"),o=null,r="";t.player.id==cc.beimi.user.id?(i.setPosition(-570,-150),r="current",e.index=t.index):1==(o=t.index-e.index)?(i.setPosition(570,50),r="right"):2==o?(i.setPosition(400,300),r="top"):3==o&&(i.setPosition(-570,50),r="left"),n.init(t.player,o,r),i.parent=e.root(),e.playersarray.push(i)},roomready_event:function(t,e){null!=e.invite&&e.invite.destroy()},playeready_event:function(t,e){t.userid==cc.beimi.user.id&&e.exchange_state("ready",e)},takecard_event:function(t,e){if(t.userid==cc.beimi.user.id){for(var i=0;i<e.playercards.length;){var n=e.playercards[i].getComponent("HandCards");if(t.card==n.value){e.playercards[i].zIndex=0,e.playercards[i].parent=null,n.reinit(),e.cardpool.put(e.playercards[i]),e.playercards.splice(i,1);var o=cc.instantiate(e.takecards_one);o.getComponent("DeskCards").init(n.value),e.deskcards.push(o),o.parent=e.deskcards_current_panel}else n.relastone(),1==n.selectcolor?e.playercards[i].zIndex=1e3+n.value:n.value>=0?e.playercards[i].zIndex=n.value:e.playercards[i].zIndex=200+n.value,i+=1}e.layout(e.cards_panel,function(t,e){return t.zIndex-e.zIndex}),e.exchange_state("takecard",e)}else{var r=e.player(t.userid,e),a=void 0,s=void 0,c=void 0;if("right"==r.tablepos){for(i=0;i<e.right_panel.children.length;i++){e.right_panel.children[i].getComponent("SpecCards").reinit()}a=e.right_panel,s=e.takecards_right,c=e.deskcards_right_panel}else if("left"==r.tablepos){for(i=0;i<e.left_panel.children.length;i++){e.left_panel.children[i].getComponent("SpecCards").reinit()}a=e.left_panel,s=e.takecards_left,c=e.deskcards_left_panel}else if("top"==r.tablepos){for(i=0;i<e.top_panel.children.length;i++){e.top_panel.children[i].getComponent("SpecCards").reinit()}a=e.top_panel,s=e.takecards_one,c=e.deskcards_top_panel}null!=a&&a.children[a.children.length-1].destroy();var l=cc.instantiate(s);l.getComponent("DeskCards").init(t.card),l.parent=c,e.deskcards.push(l)}},recover_desk_cards:function(t,e,i){if(t==cc.beimi.user.id){var n=cc.instantiate(i.takecards_one);n.getComponent("DeskCards").init(e),i.deskcards.push(n),n.parent=i.deskcards_current_panel}else{var o=i.player(t,i),r=void 0,a=void 0;"right"==o.tablepos?(i.right_panel,r=i.takecards_right,a=i.deskcards_right_panel):"left"==o.tablepos?(i.left_panel,r=i.takecards_left,a=i.deskcards_left_panel):"top"==o.tablepos&&(i.top_panel,r=i.takecards_one,a=i.deskcards_top_panel);var s=cc.instantiate(r);s.getComponent("DeskCards").init(e),s.parent=a}},dealcard_event:function(t,e){var i=e.player(t.userid,e);if(e.select_action_searchlight(t,e,i),t.userid==cc.beimi.user.id)e.initDealHandCards(e,t);else{var n=0;"top"==i.tablepos?n=1:"left"==i.tablepos&&(n=2),e.initPlayerHandCards(0,1,n,e,!0)}e.desk_cards.string=t.deskcards,"deal"==e.action&&t.userid==cc.beimi.user.id||e.exchange_state("action",e)},select_action_searchlight:function(t,e,i){e.exchange_searchlight(i.tablepos,e),e.exchange_state("nextplayer",e)},allcards_event:function(t,e){cc.beimi.gamestatus="notready",e.gameover=!1,setTimeout(function(){e.summarypage=cc.instantiate(e.summary),e.summarypage.parent=e.root(),e.summarypage.getComponent("MaJiangSummary").create(e,t),1==t.gameRoomOver&&(e.gameover=!0)},2e3),e.exchange_state("allcards",e)},recoverboard:function(t,e){},setAction:function(t,e){e.action=t},players_event:function(t,e){e.collect(e);for(var i=0;i<t.player.length;i++){if(t.player[i].id==cc.beimi.user.id){e.index=i;break}}if(t.player.length>1)for(var n=1;;){if(n==t.player.length&&(n=0),0==e.playerexist(t.player[n],e)){var o=e.playerspool.get(),r=o.getComponent("MaJiangPlayer"),a="",s=n-e.index;1==s||-3==s?(o.setPosition(570,50),a="right"):2==s||-2==s?(o.setPosition(400,300),a="top"):3!=s&&-1!=s||(o.setPosition(-570,50),a="left"),r.init(t.player[n],0,a),o.parent=e.root(),e.playersarray.push(o)}if(0==n)break;n+=1}},playerexist:function(t,e){var i=!1;if(t.id==cc.beimi.user.id)i=!0;else for(var n=0;n<e.playersarray.length;n++){if(e.playersarray[n].getComponent("MaJiangPlayer").data.id==t.id){i=!0;break}}return i},banker_event:function(t,e){for(var i=0;i<e.playersarray.length;i++){var n=e.playersarray[i].getComponent("MaJiangPlayer");if(n.data.id==t.userid){n.banker();break}}},recovery_event:function(t,e){e.decode(t.player.cards);e.play_event(t.userboard,e),e.banker_event(t.banker,e),e.selectresult_event(t.selectcolor,e);for(var i=0;i<t.cardsnum.length;i++){var n=t.cardsnum[i];e.selectresult_event(n.selectcolor,e);for(var o=e.decode(n.hiscards),r=0;r<o.length;r++)e.recover_desk_cards(n.userid,o[r],e)}for(o=e.decode(t.hiscards),r=0;r<o.length;r++)e.recover_desk_cards(t.userid,o[r],e)},action_event:function(t,e){if(e.setAction("take",e),cc.beimi.user.id==t.userid){e.exchange_state("action",e);var i=void 0,n=void 0,o=void 0,r=void 0,a=void 0;if(1==t.deal){for(var s=0;s<e.actionnode_deal.children.length;s++){var c=e.actionnode_deal.children[s];"gang"==c.name&&(i=c),"peng"==c.name&&(n=c),"chi"==c.name&&(o=c),"hu"==c.name&&(r=c),c.active=!1}t.gang&&(i.active=!0),t.peng&&(n.active=!0),t.chi&&(o.active=!0),t.hu&&(r.active=!0),e.actionnode_deal.active=!0,e.setAction("deal",e)}else{var l=0;if(1==t.gang||1==t.peng||1==t.chi||1==t.hu){e.actionnode_three.getComponent("DeskCards").init(t.card);for(s=0;s<e.actionnode_three_list.children.length;s++){var u=e.actionnode_three_list.children[s];"gang"==u.name&&(i=u),"peng"==u.name&&(n=u),"chi"==u.name&&(o=u),"hu"==u.name&&(r=u),"guo"==u.name&&(a=u),u.active=!1}t.gang&&(i.active=!0,l+=1),t.peng&&(n.active=!0,l+=1),t.chi&&(o.active=!0,l+=1),t.hu&&(r.active=!0,l+=1),0==t.deal&&(a.active=!0,l+=1);var p=1080-124*(l+1),h=cc.moveTo(.5,p,-147);h.easing(cc.easeIn(3)),e.actionnode_three.runAction(h),setTimeout(function(){null!=e.action&&e.dealActionProcess(e)},5e3)}}}},selectaction_event:function(t,e){var i=e.player(t.userid,e);if(cc.beimi.user.id==t.userid){if("all"==t.target)cc.instantiate(e.action_gang_ming_prefab).parent=e.deskcards_right_panel.parent,cc.instantiate(e.action_gang_ming_prefab).parent=e.deskcards_top_panel.parent,cc.instantiate(e.action_gang_ming_prefab).parent=e.deskcards_left_panel.parent;else e.select_action_searchlight(t,e,i);if("hu"==t.action){var n=cc.instantiate(e.takecards_one);n.getComponent("DeskCards").init(t.card),e.deskcards.push(n),n.setScale(.5,.5),n.parent=e.hu_cards_current,e.mask.active=!0}else{for(var o=0;o<e.playercards.length;){var r=e.playercards[o].getComponent("HandCards");t.cardtype==r.mjtype&&t.cardvalue==r.mjvalue?(e.cardpool.put(e.playercards[o]),e.playercards.splice(o,1)):o++}var a=void 0,s=(a="an"==t.actype?cc.instantiate(e.cards_gang_an_prefab):cc.instantiate(e.cards_gang_ming_prefab)).getComponent("GangAction");if("gang"==t.action?s.init(t.card,!0):s.init(t.card,!1),"peng"==t.action||"chi"==t.action){var c=e.cards_panel.children[e.cards_panel.children.length-1];if(null!=c){var l=c.getComponent("HandCards");null!=l&&l.lastone()}}a.parent=e.gang_current,e.actioncards.push(a);for(o=0;o<e.deskcards.length;o++){var u=e.deskcards[o];if(null!=u){var p=u.getComponent("DeskCards");if(null!=p&&p.value==t.card){u.destroy(),e.deskcards.splice(o,o+1);break}}}}e.exchange_state("nextplayer",e),e.exchange_state("action",e)}else{var h=e.player(t.target,e),d=void 0;"right"==h.tablepos?d=e.deskcards_right_panel:"left"==h.tablepos?d=e.deskcards_left_panel:"top"==h.tablepos&&(d=e.deskcards_top_panel),d.children.length>0&&d.children[d.children.length-1].destroy()}},play_event:function(t,e){cc.beimi.gamestatus="playing",e.exchange_state("begin",e);var i=t.player,n=e.decode(i.cards);setTimeout(function(){e.calcdesc_cards(e,136,t.deskcards)},0);for(var o=0,r=0;r<4;r++){e.initMjCards(o,e,n,i.banker);for(var a=0,s=0;s<t.players.length;s++)t.players[s].playuser!=cc.beimi.user.id&&e.initPlayerHandCards(o,t.players[a++].deskcards,a,e,!1);o+=1}e.cards_panel.getComponent(cc.Animation).play("majiang_reorder");var c,l=-100;for(s=0;s<e.playercards.length;s++){var u=e.playercards[s].getComponent("HandCards");u.value>=0?e.playercards[s].zIndex=u.value:e.playercards[s].zIndex=200+u.value,e.playercards[s].zIndex>l&&(l=e.playercards[s].zIndex,c=e.playercards[s])}e.layout(e.cards_panel,function(t,e){return t.zIndex-e.zIndex}),setTimeout(function(){1==i.banker&&null!=c&&c.getComponent("HandCards").lastone()},200),e.exchange_state("play",e)},selectcolor_event:function(t,e){for(var i=0;i<e.playersarray.length;i++){var n=e.playersarray[i].getComponent("MaJiangPlayer");n.data.id==cc.beimi.user.id&&n.selecting()}e.exchange_state("selectcolor",e)},selectresult_event:function(t,e){for(var i=0;i<e.playersarray.length;i++){var n=e.playersarray[i].getComponent("MaJiangPlayer");if(n.data.id==t.userid){n.selectresult(t);break}}t.userid==cc.beimi.user.id&&(e.exchange_state("selectresult",e),t.color<10&&e.changecolor(t,e))},lasthands_event:function(t,e){if(t.userid==cc.beimi.user.id)e.exchange_state("lasthands",e),e.exchange_searchlight("current",e);else{e.exchange_state("otherplayer",e);for(var i=0;i<e.playersarray.length;i++){var n=e.playersarray[i].getComponent("MaJiangPlayer");if(n.data.id==t.userid){e.exchange_searchlight(n.tablepos,e);break}}}},changecolor:function(t,e){for(var i=void 0,n=0;n<e.playercards.length;n++){var o=e.playercards[n].getComponent("HandCards");o.relastone(),parseInt(o.value/36)==t.color&&o.value>=0&&(o.selected(),e.playercards[n].zIndex=1e3+o.value,(null==i||i.zIndex<e.playercards[n].zIndex)&&(i=e.playercards[n]))}(e.layout(e.cards_panel,function(t,e){return t.zIndex-e.zIndex}),t.banker==cc.beimi.user.id&&null!=i)&&i.getComponent("HandCards").lastone()},calcdesc_cards:function(t,e,i){(e-=1)>i&&(t.desk_cards.string=e,setTimeout(function(){t.calcdesc_cards(t,e,i)},15))},initDealHandCards:function(t,e){var i=t.cardpool.get(),n=i.getComponent("HandCards");t.playercards.push(i),n.init(e.card),n.lastone(),parseInt(e.card/36)==e.color&&e.card>=0&&n.selected(),i.zIndex=2e3,i.parent=t.cards_panel},initPlayerHandCards:function(t,e,i,n,o){var r=n.right_panel,a=n.rightcards,s=n.cards_right;1==i?(r=n.top_panel,a=n.topcards,s=n.cards_top):2==i&&(r=n.left_panel,a=n.leftcards,s=n.cards_left),n.initOtherCards(t,n,e,s,a,r,o,i)},initOtherCards:function(t,e,i,n,o,r,a,s){for(var c=4*t;c<i&&c<4*(t+1);c++){var l=cc.instantiate(n);l.getComponent("SpecCards").init(a,s),l.parent=r,o.push(l)}},initMjCards:function(t,e,i,n){for(var o=function(){var t=e.cardpool.get(),o=t.getComponent("HandCards");e.playercards.push(t),o.init(i[r]),1==n&&r==i.length-1?t.parent=e.one_card_panel:t.parent=e.cards_panel,setTimeout(function(){t.parent=e.cards_panel},200)},r=4*t;r<i.length&&r<4*(t+1);r++)o()},collect:function(t){for(var e=0;e<t.playersarray.length;){var i=t.playersarray[e];i.getComponent("MaJiangPlayer").data.id!=cc.beimi.user.id?(t.playerspool.put(i),t.playersarray.splice(e,1)):e++}},waittingForPlayers:function(){this.exchange_state("ready",this)},player:function(t,e){for(var i=void 0,n=0;n<e.playersarray.length;n++){var o=e.playersarray[n].getComponent("MaJiangPlayer");if(o.data.id==t){i=o;break}}return i},exchange_state:function(t,e){for(var i=null,n=null,o=null,r=null,a=0;a<e.statebtn.children.length;a++){var s=e.statebtn.children[a];"readybtn"==s.name?i=s:"waitting"==s.name?n=s:"select"==s.name?o=s:"banker"==s.name&&(r=s),s.active=!1}switch(t){case"init":e.desk_tip.active=!1,i.active=!0,e.actionnode_deal.active=!1,e.exchange_searchlight("none",e);break;case"ready":n.active=!0,null!=cc.beimi.data&&1==cc.beimi.data.enableai?e.timer(e,cc.beimi.data.waittime):e.timer(e,cc.beimi.data.noaiwaitime);break;case"begin":n.active=!1,e.desk_tip.active=!0,e.canceltimer(e);break;case"play":e.timer(e,2);break;case"selectcolor":e.exchange_searchlight("current",e),o.active=!0,e.timer(e,5);break;case"selectresult":o.active=!1,e.canceltimer(e);break;case"lasthands":r.active=!0,e.timer(e,8);break;case"otherplayer":e.timer(e,8);break;case"takecard":r.active=!1;break;case"action":e.dealActionProcess(e);break;case"nextplayer":e.timer(e,8);break;case"allcards":for(a=0;a<e.playersarray.length;a++){e.playersarray[a].getComponent("MaJiangPlayer").clean()}e.canceltimer(e)}},exchange_searchlight:function(t,e){for(var i=0;i<e.searchlight.children.length;i++)t==e.searchlight.children[i].name?e.searchlight.children[i].active=!0:e.searchlight.children[i].active=!1},dealActionProcess:function(t){var e=cc.moveTo(.5,1080,-147);e.easing(cc.easeIn(3)),t.actionnode_three.runAction(e),"deal"==t.action&&(t.actionnode_deal.active=!1),t.action=null},canceltimer:function(t){t.unscheduleAllCallbacks(),t.mjtimer.string="00"},recovery:function(){},timer:function(t,e){t.mjtimer.string=e>9?e:"0"+e,t.callback=function(){if((e-=1)>=0){var i=e;e<10&&(i="0"+e),t.mjtimer.string=i}},t.unscheduleAllCallbacks(),t.schedule(t.callback,1,e,0)},clean:function(){for(var t=0;t<this.playercards.length;t++)this.playercards[t].destroy();this.playercards.splice(0,this.playercards.length);for(t=0;t<this.deskcards.length;t++)this.deskcards[t].destroy();this.deskcards.splice(0,this.deskcards.length);for(t=0;t<this.leftcards.length;t++)this.leftcards[t].destroy();this.leftcards.splice(0,this.leftcards.length);for(t=0;t<this.rightcards.length;t++)this.rightcards[t].destroy();this.rightcards.splice(0,this.rightcards.length);for(t=0;t<this.topcards.length;t++)this.topcards[t].destroy();this.topcards.splice(0,this.topcards.length);for(t=0;t<this.actioncards.length;t++)this.actioncards[t].destroy();this.actioncards.splice(0,this.actioncards.length),this.mask.active=!1},restart:function(){if(this.clean(),1==this.gameover){for(var t=0;t<this.player.length;t++)this.player[t].destroy();this.player.splice(0,this.player.length),this.player=new Array,this.initdata(!0)}else this.initdata(!1);this.ready()&&this.socket().emit("restart","restart")},startgame:function(){this.ready()&&this.socket().emit("start","true")},onDestroy:function(){(this.inited=!1,this.cleanmap(),this.ready())&&this.socket().emit("leave","leave")}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],MenuClick:[function(t,e,i){"use strict";cc._RF.push(e,"4ee59TGB3VFZLQuujavmCxG","MenuClick");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{setting:{default:null,type:cc.Prefab},message:{default:null,type:cc.Prefab},share:{default:null,type:cc.Prefab},playway:{default:null,type:cc.Prefab},feedback:{default:null,type:cc.Prefab}},onLoad:function(){},onSettingClick:function(){cc.beimi.openwin=cc.instantiate(this.setting),cc.beimi.openwin.parent=this.root()},onMessageClick:function(){cc.beimi.openwin=cc.instantiate(this.message),cc.beimi.openwin.parent=this.root()},onShareClick:function(){cc.beimi.openwin=cc.instantiate(this.share),cc.beimi.openwin.parent=this.root()},onPlaywayClick:function(){cc.beimi.openwin=cc.instantiate(this.playway),cc.beimi.openwin.parent=this.root()},onRecordClick:function(){cc.beimi.openwin=cc.instantiate(this.playway),cc.beimi.openwin.parent=this.root()},onFeedBackClick:function(){cc.beimi.openwin=cc.instantiate(this.feedback),cc.beimi.openwin.parent=this.root()}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],MessageDialog:[function(t,e,i){"use strict";cc._RF.push(e,"c56edHPmRpESZK38dhRM8Dx","MessageDialog"),cc.Class({extends:cc.Component,properties:{title_message:{default:null,type:cc.Node},title_contact:{default:null,type:cc.Node}},onLoad:function(){this.title_contact.active=!1,this.title_message.active=!0},onContacts:function(){this.title_contact.active=!0,this.title_message.active=!1},onMessage:function(){this.title_contact.active=!1,this.title_message.active=!0}}),cc._RF.pop()},{}],PlayGame:[function(t,e,i){"use strict";cc._RF.push(e,"6643cbk+6NH4aV0uFiz0KPh","PlayGame");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){this.resize()},onClickDizhu:function(){this.loadding();var t=this;setTimeout(function(){t.scene("dizhu",t)},200)}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],PlayPoker:[function(t,e,i){"use strict";cc._RF.push(e,"0da62UUiKFCy6UjmbXoH553","PlayPoker"),cc.Class({extends:cc.Component,properties:{posy:cc.Integer,card:{default:null,type:cc.Node}},onLoad:function(){this.posy=this.card.y},takecard:function(t){var e=t.target.parent.getComponent("BeiMiCard");null!=e.game&&(t.target.y==this.posy?(t.target.y=t.target.y+30,e.selected=!0):(t.target.y=t.target.y-30,e.selected=!1))}}),cc._RF.pop()},{}],PlayerRender:[function(t,e,i){"use strict";cc._RF.push(e,"04f19Z9BnFGC5KENS4kRc0S","PlayerRender");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{username:{default:null,type:cc.Label},goldcoins:{default:null,type:cc.Label},dizhu:{default:null,type:cc.Node},pokertag:{default:null,type:cc.Node},pokercards:{default:null,type:cc.Label},timer:{default:null,type:cc.Node},jsq:{default:null,type:cc.Node},headimg:{default:null,type:cc.Node},atlas:{default:null,type:cc.SpriteAtlas},timer_num:{default:null,type:cc.Label},result:{default:null,type:cc.Node},lastcards:{default:null,type:cc.Node},cannot:{default:null,type:cc.Node},donot:{default:null,type:cc.Node}},onLoad:function(){this.cardcount=0,this.cardslist=new Array,this.isRight=!1},initplayer:function(t,e){if(this.username.string=t.username,this.userid=t.id,1==e&&(this.pokertag.x=-1*this.pokertag.x,this.timer.x=-1*this.timer.x,this.headimg.x=-1*this.headimg.x,this.result.x=-1*this.result.x,this.cannot.x=-1*this.cannot.x,this.donot.x=-1*this.donot.x,this.jsq.x=-1*this.jsq.x,this.dizhu.x=-1*this.dizhu.x,this.lastcards.getComponent(cc.Layout).horizontalDirection=0,this.isRight=e),this.goldcoins)if(t.goldcoins>1e4){var i=this.goldcoins/1e4;this.goldcoins.string=i.toFixed(2)+"\u4e07"}else this.goldcoins.string=t.goldcoins;this.dizhu&&(this.dizhu.active=!1),this.jsq&&(this.jsq.active=!1),this.result&&(this.result.active=!1),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!1),this.takecards&&(this.takecards.active=!1)},countcards:function(t){this.cardcount=this.cardcount+t,this.pokercards.string=this.cardcount},resetcards:function(t){this.cardcount=t,null!=this.pokercards&&(this.pokercards.string=this.cardcount)},catchtimer:function(e){this.jsq&&(this.jsq.active=!0),this.result&&(this.result.active=!1),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!1);var i=t("GameTimer");this.beimitimer=new i,this.timesrc=this.beimitimer.runtimer(this,this.jsq,this.atlas,this.timer_num,this.timer_num,e)},catchresult:function(t){if(this.beimitimer){this.beimitimer.stoptimer(this,this.jsq,this.timesrc);var e=this.atlas.getSpriteFrame("\u63d0\u793a_\u62a2\u5730\u4e3b"),i=this.atlas.getSpriteFrame("\u63d0\u793a_\u4e0d\u62a2");t.grab?(this.result&&(this.result.getComponent(cc.Sprite).spriteFrame=e,this.result.active=!0),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!1)):(this.result&&(this.result.getComponent(cc.Sprite).spriteFrame=i,this.result.active=!0),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!1))}},hideresult:function(){this.result&&(this.result.active=!1),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!1)},lasthands:function(t,e,i){this.hideresult(),this.beimitimer&&this.timesrc&&this.beimitimer.stoptimer(this,this.jsq,this.timesrc),this.userid==i.userid&&(this.pokercards&&this.countcards(3),this.playtimer(e,25)),this.setDizhuFlag(i)},setDizhuFlag:function(t){this.userid==t.userid?this.dizhu.active=!0:this.dizhu.active=!1},lasttakecards:function(t,e,i,n,o){if(this.beimitimer&&this.timesrc&&this.beimitimer.stoptimer(this,this.jsq,this.timesrc),this.result&&(this.result.active=!1),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!1),this.jsq&&(this.jsq.active=!1),this.lastcards&&(this.lastcards.active=!0),this.cardslist.length>0){for(var r=0;r<this.cardslist.length;r++)t.minpokerpool.put(this.cardslist[r]);this.cardslist.splice(0,this.cardslist.length)}if(0==o.donot||1==o.finished){this.resetcards(i);for(r=0;r<n.length;r++)this.playcards(t,r,n[r],n);this.layout(this.lastcards,function(t,e){return t.zIndex-e.zIndex})}else"1"==o.sameside?e.getPlayer(o.userid).tipdonot():e.getPlayer(o.userid).tipcannot()},tipcannot:function(){this.result&&(this.result.active=!1),this.cannot&&(this.cannot.active=!0),this.donot&&(this.donot.active=!1)},tipdonot:function(){this.result&&(this.result.active=!1),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!0)},playcards:function(t,e,i,n){var o=t.minpokerpool.get();o.x=30*e-30;var r=this.countcard(i,n);o.zIndex=4-r,o.parent=this.lastcards,this.cardslist.push(o);var a=o.getComponent("BeiMiCard");a.setCard(i),a.order()},countcard:function(t,e){for(var i=parseInt(t/4),n=0,o=0;o<e.length;o++){i==parseInt(e[o]/4)&&(n+=1)}return n},playtimer:function(e,i){this.result&&(this.result.active=!1),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!1),this.lastcards&&(this.lastcards.active=!1);for(var n=0;n<this.cardslist.length;n++)e.minpokerpool.put(this.cardslist[n]);var o=t("GameTimer");this.beimitimer=new o,this.timesrc=this.beimitimer.runtimer(this,this.jsq,this.atlas,this.timer_num,this.timer_num,i)},clean:function(t){for(var e=0;e<this.cardslist.length;e++)t.minpokerpool.put(this.cardslist[e]);this.resetcards(0),this.dizhu&&(this.dizhu.active=!1),this.jsq&&(this.jsq.active=!1),this.result&&(this.result.active=!1),this.cannot&&(this.cannot.active=!1),this.donot&&(this.donot.active=!1),this.takecards&&(this.takecards.active=!1)}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon",GameTimer:"GameTimer"}],PlayersEvent:[function(t,e,i){"use strict";cc._RF.push(e,"f88a1eHh9tCsqfPY5gVf+/A","PlayersEvent"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],PlaywayClick:[function(t,e,i){"use strict";cc._RF.push(e,"917d5CY9nhAg4c6kp0gnisn","PlaywayClick");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{playway:{default:null,type:cc.Node}},onLoad:function(){},onClick:function(){this.getCommon("SelectPlayway");var t=this.playway.getComponent("Playway"),e={gametype:t.data.code,playway:t.data.id};this.closeOpenWin(),this.preload(e,this)},createRoom:function(t,e){var i=this;this.loadding(),setTimeout(function(){i.scene(e,i)},200)}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],PlaywayGroup:[function(t,e,i){"use strict";cc._RF.push(e,"23db4wB+L1AhpChiA3tHB3S","PlaywayGroup");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{grouptitle:{default:null,type:cc.Label},groupbox:{default:null,type:cc.Node},groupbox_four:{default:null,type:cc.Node},content:{default:null,type:cc.Node},itemname:{default:null,type:cc.Label},checkbox:{default:null,type:cc.Node},checkboxnode:{default:null,type:cc.Node}},onLoad:function(){var t=this;this.node.on("checkbox",function(e){if(null!=t.checkbox)if(0==t.checked){if("radio"==t.data.type)for(var i=0;i<t.options.length;i++){t.options[i].doUnChecked()}t.doChecked()}else if("radio"==t.data.type){for(i=0;i<t.options.length;i++){t.options[i].doUnChecked()}t.doChecked()}else t.doUnChecked();e.stopPropagation()})},init:function(t,e,i,n){if(this.data=t,this.options=n,this.groupoptions=new Array,this.checked=!1,this.grouptitle.string=t.name,null!=this.groupbox&&null!=e){for(var o=0,r=0;r<i.length;r++)if(i[r].groupid==t.id){o+=1;var a=cc.instantiate(e);null!=t.style&&"three"==t.style?(a.parent=this.groupbox,this.groupbox_four.active=!1,this.groupbox.active=!0):(a.parent=this.groupbox_four,this.groupbox_four.active=!0,this.groupbox.active=!1);var s=a.getComponent("PlaywayGroup");this.groupoptions.push(s),s.inititem(i[r],t,this.groupoptions)}null!=t.style&&"three"==t.style?o>4&&(this.content.height=35+50*(parseInt((o-1)/3)+1),this.groupbox.height=50*(parseInt((o-1)/3)+1)):o>4&&(this.content.height=35+50*(parseInt((o-1)/4)+1),this.groupbox_four.height=50*(parseInt((o-1)/4)+1))}},inititem:function(t,e,i){this.data=e,this.item=t,this.options=i,this.itemname.string=t.name,"three"==e.style?(this.itemname.node.width=160,this.itemname.node.x=107):(this.itemname.node.width=105,this.itemname.node.x=77),1==t.defaultvalue?this.doChecked():this.doUnChecked(),null!=e&&null!=e.style&&"three"==e.style&&(this.checkboxnode.x=-76)},doChecked:function(){this.checked=!0,this.checkbox.active=!0},doUnChecked:function(){this.checked=!1,this.checkbox.active=!1}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],Playway:[function(t,e,i){"use strict";cc._RF.push(e,"bc637Rt3XZNHq0lqg8C5lYR","Playway");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{tag:{default:null,type:cc.Node},score:{default:null,type:cc.Label},onlineusers:{default:null,type:cc.Label},scorelimit:{default:null,type:cc.Label},atlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){},init:function(t){if(t){var e="\u521d\u7ea7";"2"==t.level&&(e="\u9ad8\u7ea7"),this.data=t,0==t.shuffle?this.tag.active=!1:this.tag.active=!0,e+=t.skin,this.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame(e),this.onlineusers.string=t.onlineusers+" \u4eba ";var i=parseInt(t.mincoins/1e3)+"\u5343";t.mincoins>=1e4&&(i=parseInt(t.mincoins/1e4)+"\u4e07");var n=parseInt(t.maxcoins/1e3)+"\u5343";t.maxcoins>=1e4&&(n=parseInt(t.maxcoins/1e4)+"\u4e07"),this.scorelimit.string=i+"-"+n,this.score.string=t.score}}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],Ready:[function(t,e,i){"use strict";cc._RF.push(e,"752c7696GJE1bnLAB2ZAIEG","Ready");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{target:{default:null,type:cc.Node}},onLoad:function(){},onClick:function(t){this.target.getComponent("MajiangDataBind").startgame()}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],RoomClick:[function(t,e,i){"use strict";cc._RF.push(e,"f9e4fYjsVRIGLcQEne6Zyt1","RoomClick"),cc.Class({extends:cc.Component,properties:{},onClick:function(){this.node.dispatchEvent(new cc.Event.EventCustom("checkbox",!0))},onCreateRoom:function(){this.node.dispatchEvent(new cc.Event.EventCustom("createroom",!0))}}),cc._RF.pop()},{}],RoomOption:[function(t,e,i){"use strict";cc._RF.push(e,"69fc37PjLpDHJPum+0hWtu/","RoomOption");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{atlas:{default:null,type:cc.SpriteAtlas},memo:{default:null,type:cc.Label},optionsnode:{default:null,type:cc.Node},roomtitle:{default:null,type:cc.Node},optiongroup:{default:null,type:cc.Prefab},optiongroupitem:{default:null,type:cc.Prefab},memonode:{default:null,type:cc.Node},createroom:{default:null,type:cc.Node},freeopt:{default:null,type:cc.Node}},onLoad:function(){var t=this;this.group=new Array,this.node.on("createroom",function(e){for(var i={},n=(new Array,0);n<t.group.length;n++){for(var o=t.group[n],r="",a=0;a<o.groupoptions.length;a++){var s=o.groupoptions[a];1==s.checked&&(""!=r&&(r+=","),r+=s.item.value)}i[o.data.code]=r}i.gametype=t.data.code,i.playway=t.data.id,i.gamemodel="room",e.stopPropagation(),t.preload(i,t)})},init:function(t){if(this.data=t,null!=this.memo&&null!=t.memo&&""!=t.memo?(this.memonode.active=!0,this.memo.string=t.memo):null!=this.memonode&&(this.memonode.active=!1),1==t.free?(this.freeopt.active=!0,this.createroom.active=!1):(this.freeopt.active=!1,this.createroom.active=!0),null!=t.roomtitle&&""!=t.roomtitle){var e=this.atlas.getSpriteFrame(t.roomtitle);null!=e&&(this.roomtitle.getComponent(cc.Sprite).spriteFrame=e)}if(null!=this.optiongroup&&null!=t.groups)for(var i=0;i<t.groups.length;i++){var n=cc.instantiate(this.optiongroup),o=n.getComponent("PlaywayGroup");o.init(t.groups[i],this.optiongroupitem,t.items),this.group.push(o),n.parent=this.optionsnode}}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],RoomPlayway:[function(t,e,i){"use strict";cc._RF.push(e,"3086d4/qp5Fs4lHZ22cK68H","RoomPlayway");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{atlas:{default:null,type:cc.SpriteAtlas},gametype:{default:null,type:cc.Node},roomoption:{default:null,type:cc.Prefab}},onLoad:function(){},init:function(t){t&&(this.data=t),"dizhu"==t.code?this.gametype.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("\u6597\u5730\u4e3b"):"majiang"==t.code?this.gametype.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("\u5e7f\u4e1c\u9ebb\u5c06"):"poker"==t.code&&(this.gametype.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("\u5fb7\u5dde\u6251\u514b"))}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],Room:[function(t,e,i){"use strict";cc._RF.push(e,"ad979AdLn9Cd6FhwY0F5RKz","Room"),cc.Class({extends:cc.Component,properties:{playway:{default:null,type:cc.Prefab}},onLoad:function(){this.playwaypool=new cc.NodePool;for(var t=0;t<5;t++)this.playwaypool.put(cc.instantiate(this.playway));this.playwayarray=new Array},init:function(){var t=cc.beimi.game.type(data);if(null!=t)for(var e=0;e<t.playways.length;e++){var i=this.playwaypool.get();i.getComponent("Playway").init(t.playways[e]),i.parent=this.content,this.playwayarray.push(i)}}}),cc._RF.pop()},{}],SelectColor:[function(t,e,i){"use strict";cc._RF.push(e,"f8327R8gFFLi72Qcm9IEpSQ","SelectColor");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){},onClick:function(t,e){this.ready()&&this.socket().emit("selectcolor",e)}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],SelectPlayway:[function(t,e,i){"use strict";cc._RF.push(e,"b0664oMnHlOK5okeYWUYZ/B","SelectPlayway");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{first:{default:null,type:cc.Node},second:{default:null,type:cc.Node},gamepoint:{default:null,type:cc.Node},title:{default:null,type:cc.Node},global:{default:null,type:cc.Node},playway:{default:null,type:cc.Prefab},content:{default:null,type:cc.Node}},onLoad:function(){if(null!=cc.beimi&&null!=cc.beimi.user){this.disMenu("first"),this.playwaypool=new cc.NodePool;for(var t=0;t<20;t++)this.playwaypool.put(cc.instantiate(this.playway));if(this.playwayarray=new Array,this.gamepoint&&null!=cc.beimi&&null!=cc.beimi.games)for(var e=0;e<this.gamepoint.children.length;e++){var i=this.gamepoint.children[e].name,n=!1;for(t=0;t<cc.beimi.games.length;t++){for(var o=cc.beimi.games[t],r=0;r<o.types.length;r++){if(o.types[r].code==i){n=!0;break}}if(1==n)break}this.gamepoint.children[e].active=1==n}}},onClick:function(t,e){if(this.disMenu("second"),this.global.getComponent("DefaultHallDataBind").playToLeft(),this._secondAnimCtrl=this.second.getComponent(cc.Animation),this._secondAnimCtrl.play("playway_display"),this.title)for(var i=0;i<this.title.children.length;i++)this.title.children[i].name==e?this.title.children[i].active=!0:this.title.children[i].active=!1;var n=cc.beimi.game.type(e);if(null!=n)for(i=0;i<n.playways.length;i++){var o=this.playwaypool.get(),r=o.getComponent("Playway");null==r&&(r=o.getComponent("RoomPlayway")),r.init(n.playways[i]),o.parent=this.content,this.playwayarray.push(o)}},onRoomClick:function(){this.disMenu("third"),this._menuDisplay=this.third.getComponent(cc.Animation),this._menuDisplay.play("play_room_display")},onSecondBack:function(t,e){this.global.getComponent("DefaultHallDataBind").playToRight(),this.collect(),this.disMenu("first")},onThirddBack:function(t,e){this.disMenu("first")},collect:function(){for(var t=0;t<this.playwayarray.length;t++)this.playwaypool.put(this.playwayarray[t]);this.playwayarray.splice(0,this.playwayarray.length)},disMenu:function(t){"first"==t?(this.first.active=!0,this.second.active=!1,null!=this.third&&(this.third.active=!1)):"second"==t?(this.first.active=!1,this.second.active=!0,null!=this.third&&(this.third.active=!1)):"third"==t&&(this.first.active=!1,this.second.active=!1,null!=this.third&&(this.third.active=!0))}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],SettingClide:[function(t,e,i){"use strict";cc._RF.push(e,"90431f23JhC0KoTIGgpT8b7","SettingClide"),cc.Class({extends:cc.Component,properties:{music:{default:null,type:cc.Sprite},musicSlider:{default:null,type:cc.Slider},sound:{default:null,type:cc.Sprite},soundSlider:{default:null,type:cc.Slider},musicon:{default:null,type:cc.Node},musicoff:{default:null,type:cc.Node},soundon:{default:null,type:cc.Node},soundoff:{default:null,type:cc.Node}},onLoad:function(){this.musicSlider.progress=cc.beimi.audio.bgVolume,this.music.fillRange=cc.beimi.audio.bgVolume,cc.beimi.audio.getState()==cc.audioEngine.AudioState.PLAYING?(this.musicon.active=!0,this.musicoff.active=!1):(this.musicon.active=!1,this.musicoff.active=!0)},onMusicSlide:function(t){this.music.fillRange=t.progress,cc.beimi.audio.setBGMVolume(t.progress),this.musicon.active=!0,this.musicoff.active=!1},onSoundSlide:function(t){this.sound.fillRange=t.progress},onMusiceBtnClick:function(){cc.beimi.audio.getState()==cc.audioEngine.AudioState.PLAYING?(this.musicon.active=!1,this.musicoff.active=!0,cc.beimi.audio.pauseAll()):(this.musicon.active=!0,this.musicoff.active=!1,cc.beimi.audio.resumeAll())}}),cc._RF.pop()},{}],SpecCards:[function(t,e,i){"use strict";cc._RF.push(e,"92a2dUdJFBDKb8JTWhMyGZu","SpecCards"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(t,e){this.spec=t,this.inx=e,1==this.spec&&(0==this.inx||2==this.inx?this.node.height=this.node.height+50:this.node.width=this.node.width+30)},reinit:function(){1==this.spec&&(0==this.inx||2==this.inx?this.node.height=this.node.height-50:this.node.width=this.node.width-30),this.spec=!1}}),cc._RF.pop()},{}],SummaryClick:[function(t,e,i){"use strict";cc._RF.push(e,"72e3dJ9+HxO36v85+BG/64a","SummaryClick"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onBGClick:function(t){t.stopPropagation()},onCloseClick:function(){this.node.dispatchEvent(new cc.Event.EventCustom("close",!0))},onBeginClick:function(){this.node.dispatchEvent(new cc.Event.EventCustom("begin",!0))}}),cc._RF.pop()},{}],SummaryDetail:[function(t,e,i){"use strict";cc._RF.push(e,"4b94d75s1JMlLg4UokBmvtU","SummaryDetail"),cc.Class({extends:cc.Component,properties:{workitem:{default:null,type:cc.Node},myscore:{default:null,type:cc.Label},myflag:{default:null,type:cc.Node},player_1:{default:null,type:cc.Node},player_1_flag:{default:null,type:cc.Node},player_1_name:{default:null,type:cc.Label},player_1_score:{default:null,type:cc.Label},player_2:{default:null,type:cc.Node},player_2_flag:{default:null,type:cc.Node},player_2_name:{default:null,type:cc.Label},player_2_score:{default:null,type:cc.Label}},onLoad:function(){var t=this;this.workitem.on("begin",function(e){null!=t.context&&(t.context.summarypage.destroy(),t.context.restart("begin")),e.stopPropagation()}),this.workitem.on("opendeal",function(e){null!=t.context&&(t.context.summarypage.destroy(),t.context.restart("opendeal")),e.stopPropagation()}),this.workitem.on("close",function(e){null!=t.context&&(t.context.onCloseClick(),t.context.summarypage.destroy()),e.stopPropagation()})},create:function(t,e){this.context=t;for(var i=0,n=0;n<e.players.length;n++){var o=e.players[n];o.userid==cc.beimi.user.id?this.process(o,null,this.myscore,this.myflag):(0==i?this.process(o,this.player_1_name,this.player_1_score,this.player_1_flag):1==i&&this.process(o,this.player_2_name,this.player_2_score,this.player_2_flag),i+=1)}},process:function(t,e,i,n){null!=e&&(e.string=t.username),1==t.win?i.string=t.score:i.string="-"+t.score,1==t.dizhu?n.active=!0:n.active=!1}}),cc._RF.pop()},{}],TakeMJCard:[function(t,e,i){"use strict";cc._RF.push(e,"09db6qY1x9IrIdvV3VFAYc8","TakeMJCard"),cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node}},onLoad:function(){this.clickstate=!1},onClick:function(){var t=this.target.getComponent("HandCards"),e=this;1==this.clickstate?this.node.dispatchEvent(new cc.Event.EventCustom("takecard",!0)):(1==t.take?(t.take=!1,this.target.y=this.target.y-30):(t.take=!0,this.target.y=this.target.y+30),this.clickstate=!0,setTimeout(function(){e.clickstate=!1},500))}}),cc._RF.pop()},{}],common:[function(t,e,i){"use strict";cc._RF.push(e,"c20fdJA4UpBA5zauiK5QF44","common");var n=t("BeiMiCommon");cc.Class({extends:n,onLoad:function(){},login:function(){if(this.io=t("IOUtils"),this.loadding(),null==this.io.get("userinfo"))cc.beimi.http.httpGet("/api/guest",this.sucess,this.error,this);else{var e=JSON.parse(this.io.get("userinfo"));if(null!=e.token)cc.beimi.http.httpGet("/api/guest?token="+e.token.id,this.sucess,this.error,this)}},sucess:function(t,e){var i=JSON.parse(t);null!=i&&null!=i.token&&null!=i.data&&(e.reset(i,t),cc.beimi.gamestatus=i.data.gamestatus,e.connect(),null!=cc.beimi.gametype&&""!=cc.beimi.gametype&&e.scene(cc.beimi.gametype,e))},error:function(t){t.closeloadding(t.loaddingDialog),t.alert("\u7f51\u7edc\u5f02\u5e38\uff0c\u670d\u52a1\u8bbf\u95ee\u5931\u8d25")}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon",IOUtils:"IOUtils"}],form:[function(t,e,i){"use strict";cc._RF.push(e,"3c448sm7ERFGonudseXdiiB","form"),cc.Class({extends:cc.Component,properties:{username:cc.EditBox,password:cc.EditBox},onLoad:function(){this._prefab=cc.find("Canvas/login")},submit:function(){if(""==!this.username.string&&""==!this.password.string&&(this._prefab.destroy(),cc.beimi.loadding.size()>0)){var t=cc.beimi.loadding.get(),e=cc.find("Canvas");t.parent=e,this._animCtrl=t.getComponent(cc.Animation),this._animCtrl.play("loadding").wrapMode=cc.WrapMode.Loop}},guest:function(){}}),cc._RF.pop()},{}],init:[function(t,e,i){"use strict";cc._RF.push(e,"2b60bxhrRtJ44oyACJf+UrI","init"),cc.Class({extends:cc.Component,properties:{_progress:0,_splash:null,_isLoading:!1,loaddingPrefab:{default:null,type:cc.Prefab},alertPrefab:{default:null,type:cc.Prefab}},onLoad:function(){if(!cc.sys.isNative&&cc.sys.isMobile){var t=this.node.getComponent(cc.Canvas);t.fitHeight=!0,t.fitWidth=!0}var e=cc.director.getWinSize();cc.view.setDesignResolutionSize(e.width,e.height,cc.ResolutionPolicy.EXACT_FIT),this.initMgr()},start:function(){},initMgr:function(){if(null==cc.beimi){cc.beimi={},cc.beimi.routes={},cc.beimi.http=t("HTTP"),cc.beimi.seckey="beimi",cc.beimi.gamestatus="none",cc.beimi.dialog=null,cc.beimi.openwin=null,cc.beimi.loadding=new cc.NodePool,cc.beimi.loadding.put(cc.instantiate(this.loaddingPrefab)),cc.beimi.dialog=new cc.NodePool,cc.beimi.dialog.put(cc.instantiate(this.alertPrefab)),cc.beimi.game={model:null,playway:null,type:function(t){var e;if(null!=cc.beimi.games)for(var i=0;i<cc.beimi.games.length;i++)for(var n=cc.beimi.games[i],o=0;o<n.types.length;o++){var r=n.types[o];r.code==t&&(e=r)}return e}};var e=t("Audio");cc.beimi.audio=new e,cc.beimi.audio.init(),cc.sys.isNative?window.io=SocketIO:window.io=t("socket.io"),cc.beimi.audio.playBGM("bgMain.mp3")}}}),cc._RF.pop()},{Audio:"Audio",HTTP:"HTTP","socket.io":"socket.io"}],logindialog:[function(t,e,i){"use strict";cc._RF.push(e,"6a4c7+ASWxPzb8+X9E5tU/a","logindialog");var n=t("BeiMiCommon");cc.Class({extends:n,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation()})},onCloseClick:function(){var t=this.getCommon("common");null!=t&&t.loginFormPool.put(t.dialog)}}),cc._RF.pop()},{BeiMiCommon:"BeiMiCommon"}],"socket.io":[function(t,e,i){(function(n){"use strict";cc._RF.push(e,"83e71BFtMFHUZ8vefL8Yxl5","socket.io");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};cc.sys.isNative||function(t){if("object"===(void 0===i?"undefined":o(i))&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).io=t()}}(function(){return function e(i,n,o){function r(s,c){if(!n[s]){if(!i[s]){var l="function"==typeof t&&t;if(!c&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[s]={exports:{}};i[s][0].call(p.exports,function(t){var e=i[s][1][t];return r(e||t)},p,p.exports,e,i,n,o)}return n[s].exports}for(var a="function"==typeof t&&t,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,i){e.exports=t("./lib/")},{"./lib/":2}],2:[function(t,e,i){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(t,e,i){(function(i){var n=t("./transports"),r=t("component-emitter"),a=t("debug")("engine.io-client:socket"),s=t("indexof"),c=t("engine.io-parser"),l=t("parseuri"),u=t("parsejson"),p=t("parseqs");function h(t,e){if(!(this instanceof h))return new h(t,e);e=e||{},t&&"object"==(void 0===t?"undefined":o(t))&&(e=t,t=null),t?(t=l(t),e.hostname=t.host,e.secure="https"==t.protocol||"wss"==t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=l(e.host).host),this.secure=null!=e.secure?e.secure:i.location&&"https:"==location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(i.location?location.hostname:"localhost"),this.port=e.port||(i.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized?null:e.rejectUnauthorized;var n="object"==(void 0===i?"undefined":o(i))&&i;n.global===n&&e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),this.open()}e.exports=h,h.priorWebsocketSuccess=!1,r(h.prototype),h.protocol=c.protocol,h.Socket=h,h.Transport=t("./transport"),h.transports=t("./transports"),h.parser=t("engine.io-parser"),h.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}(this.query);return e.EIO=c.protocol,e.transport=t,this.id&&(e.sid=this.id),new n[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},h.prototype.open=function(){var t;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},h.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},h.prototype.probe=function(t){a('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),i=!1,n=this;function o(){if(n.onlyBinaryUpgrades){var o=!this.supportsBinary&&n.transport.supportsBinary;i=i||o}i||(a('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(o){if(!i)if("pong"==o.type&&"probe"==o.data){if(a('probe transport "%s" pong',t),n.upgrading=!0,n.emit("upgrading",e),!e)return;h.priorWebsocketSuccess="websocket"==e.name,a('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){i||"closed"!=n.readyState&&(a("changing transport and sending upgrade packet"),p(),n.setTransport(e),e.send([{type:"upgrade"}]),n.emit("upgrade",e),e=null,n.upgrading=!1,n.flush())})}else{a('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=e.name,n.emit("upgradeError",r)}}))}function r(){i||(i=!0,p(),e.close(),e=null)}function s(i){var o=new Error("probe error: "+i);o.transport=e.name,r(),a('probe transport "%s" failed because of error: %s',t,i),n.emit("upgradeError",o)}function c(){s("transport closed")}function l(){s("socket closed")}function u(t){e&&t.name!=e.name&&(a('"%s" works - aborting "%s"',t.name,e.name),r())}function p(){e.removeListener("open",o),e.removeListener("error",s),e.removeListener("close",c),n.removeListener("close",l),n.removeListener("upgrading",u)}h.priorWebsocketSuccess=!1,e.once("open",o),e.once("error",s),e.once("close",c),this.once("close",l),this.once("upgrading",u),e.open()},h.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},h.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(u(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},h.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},h.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},h.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(t,e,i){return this.sendPacket("message",t,e,i),this},h.prototype.sendPacket=function(t,e,i,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof i&&(n=i,i=null),"closing"!=this.readyState&&"closed"!=this.readyState){(i=i||{}).compress=!1!==i.compress;var o={type:t,data:e,options:i};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},h.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}function e(){t.onClose("forced close"),a("socket closing - telling transport to close"),t.transport.close()}function i(){t.removeListener("upgrade",i),t.removeListener("upgradeError",i),e()}function n(){t.once("upgrade",i),t.once("upgradeError",i)}return this},h.prototype.onError=function(t){a("socket error %j",t),h.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},h.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},h.prototype.filterUpgrades=function(t){for(var e=[],i=0,n=t.length;i<n;i++)~s(this.transports,t[i])&&e.push(t[i]);return e}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(t,e,i){var n=t("engine.io-parser"),o=t("component-emitter");function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders}e.exports=r,o(r.prototype),r.prototype.onError=function(t,e){var i=new Error(t);return i.type="TransportError",i.description=e,this.emit("error",i),this},r.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(t,e,i){(function(e){var n=t("xmlhttprequest-ssl"),o=t("./polling-xhr"),r=t("./polling-jsonp"),a=t("./websocket");i.polling=function(t){var i=!1,a=!1,s=!1!==t.jsonp;if(e.location){var c="https:"==location.protocol,l=location.port;l||(l=c?443:80),i=t.hostname!=location.hostname||l!=t.port,a=t.secure!=c}if(t.xdomain=i,t.xscheme=a,"open"in new n(t)&&!t.forceJSONP)return new o(t);if(!s)throw new Error("JSONP disabled");return new r(t)},i.websocket=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(t,e,i){(function(i){var n=t("./polling"),o=t("component-inherit");e.exports=l;var r,a=/\n/g,s=/\\n/g;function c(){}function l(t){n.call(this,t),this.query=this.query||{},r||(i.___eio||(i.___eio=[]),r=i.___eio),this.index=r.length;var e=this;r.push(function(t){e.onData(t)}),this.query.j=this.index,i.document&&i.addEventListener&&i.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=c)},!1)}o(l,n),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(e,i):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},l.prototype.doWrite=function(t,e){var i=this;if(!this.form){var n,o=document.createElement("form"),r=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=c,o.method="POST",o.setAttribute("accept-charset","utf-8"),r.name="d",o.appendChild(r),document.body.appendChild(o),this.form=o,this.area=r}function l(){u(),e()}function u(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';n=document.createElement(t)}catch(t){(n=document.createElement("iframe")).name=i.iframeId,n.src="javascript:0"}n.id=i.iframeId,i.form.appendChild(n),i.iframe=n}this.form.action=this.uri(),u(),t=t.replace(s,"\\\n"),this.area.value=t.replace(a,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&l()}:this.iframe.onload=l}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./polling":8,"component-inherit":16}],7:[function(t,e,i){(function(i){var n=t("xmlhttprequest-ssl"),o=t("./polling"),r=t("component-emitter"),a=t("component-inherit"),s=t("debug")("engine.io-client:polling-xhr");function c(){}function l(t){if(o.call(this,t),i.location){var e="https:"==location.protocol,n=location.port;n||(n=e?443:80),this.xd=t.hostname!=i.location.hostname||n!=t.port,this.xs=t.secure!=e}else this.extraHeaders=t.extraHeaders}function u(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function p(){for(var t in u.requests)u.requests.hasOwnProperty(t)&&u.requests[t].abort()}e.exports=l,e.exports.Request=u,a(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.extraHeaders=this.extraHeaders,new u(t)},l.prototype.doWrite=function(t,e){var i="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:i}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},l.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},r(u.prototype),u.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new n(t),o=this;try{s("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}catch(t){}if(this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){o.onLoad()},e.onerror=function(){o.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?o.onLoad():setTimeout(function(){o.onError(e.status)},0))},s("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){o.onError(t)},0)}i.document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},u.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},u.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,t)try{this.xhr.abort()}catch(t){}i.document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var i=new Uint8Array(this.xhr.response),n=[],o=0,r=i.length;o<r;o++)n.push(i[o]);t=String.fromCharCode.apply(null,n)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},u.prototype.hasXDR=function(){return void 0!==i.XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},i.document&&(u.requestsCount=0,u.requests={},i.attachEvent?i.attachEvent("onunload",p):i.addEventListener&&i.addEventListener("beforeunload",p,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(t,e,i){var n=t("../transport"),o=t("parseqs"),r=t("engine.io-parser"),a=t("component-inherit"),s=t("yeast"),c=t("debug")("engine.io-client:polling");e.exports=u;var l=null!=new(t("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function u(t){var e=t&&t.forceBase64;l&&!e||(this.supportsBinary=!1),n.call(this,t)}a(u,n),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(t){var e=this;function i(){c("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(c("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){c("pre-pause polling complete"),--n||i()})),this.writable||(c("we are currently writing - waiting to pause"),n++,this.once("drain",function(){c("pre-pause writing complete"),--n||i()}))}else i()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(t){var e=this;c("polling got data %s",t);r.decodePayload(t,this.socket.binaryType,function(t,i,n){if("opening"==e.readyState&&e.onOpen(),"close"==t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var t=this;function e(){c("writing close packet"),t.write([{type:"close"}])}"open"==this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},u.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")};e=this;r.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,i)})},u.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(i=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(t,e,i){(function(i){var n=t("../transport"),o=t("engine.io-parser"),r=t("parseqs"),a=t("component-inherit"),s=t("yeast"),c=t("debug")("engine.io-client:websocket"),l=i.WebSocket||i.MozWebSocket,u=l||("undefined"!=typeof window?null:t("ws"));function p(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,n.call(this,t)}e.exports=p,a(p,n),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e={agent:this.agent,perMessageDeflate:this.perMessageDeflate};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(e.headers=this.extraHeaders),this.ws=l?new u(t):new u(t,void 0,e),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(p.prototype.onData=function(t){var e=this;setTimeout(function(){n.prototype.onData.call(e,t)},0)}),p.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,r=0,a=n;r<a;r++)(function(t){o.encodePacket(t,e.supportsBinary,function(o){if(!l){var r={};if(t.options&&(r.compress=t.options.compress),e.perMessageDeflate)("string"==typeof o?i.Buffer.byteLength(o):o.length)<e.perMessageDeflate.threshold&&(r.compress=!1)}try{l?e.ws.send(o):e.ws.send(o,r)}catch(t){c("websocket closed before onclose event")}--n||s()})})(t[r]);function s(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}},p.prototype.onClose=function(){n.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",i="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(i=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||(t.b64=1),(t=r.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t},p.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===p.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(t,e,i){var n=t("has-cors");e.exports=function(t){var e=t.xdomain,i=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(t){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}},{"has-cors":22}],11:[function(t,e,i){function n(){}e.exports=function(t,e,i){var o=!1;return i=i||n,r.count=t,0===t?e():r;function r(t,n){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(o=!0,e(t),e=i):0!==r.count||o||e(null,n)}}},{}],12:[function(t,e,i){e.exports=function(t,e,i){var n=t.byteLength;if(e=e||0,i=i||n,t.slice)return t.slice(e,i);if(e<0&&(e+=n),i<0&&(i+=n),i>n&&(i=n),e>=n||e>=i||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),r=new Uint8Array(i-e),a=e,s=0;a<i;a++,s++)r[s]=o[a];return r.buffer}},{}],13:[function(t,e,i){(function(t){i.encode=function(e){var i,n=new Uint8Array(e),o=n.length,r="";for(i=0;i<o;i+=3)r+=t[n[i]>>2],r+=t[(3&n[i])<<4|n[i+1]>>4],r+=t[(15&n[i+1])<<2|n[i+2]>>6],r+=t[63&n[i+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r},i.decode=function(e){var i,n,o,r,a,s=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),p=new Uint8Array(u);for(i=0;i<c;i+=4)n=t.indexOf(e[i]),o=t.indexOf(e[i+1]),r=t.indexOf(e[i+2]),a=t.indexOf(e[i+3]),p[l++]=n<<2|o>>4,p[l++]=(15&o)<<4|r>>2,p[l++]=(3&r)<<6|63&a;return u}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(t,e,i){(function(t){var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),o=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),r=i&&i.prototype.append&&i.prototype.getBlob;function a(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.buffer instanceof ArrayBuffer){var n=i.buffer;if(i.byteLength!==n.byteLength){var o=new Uint8Array(i.byteLength);o.set(new Uint8Array(n,i.byteOffset,i.byteLength)),n=o.buffer}t[e]=n}}}function s(t,e){e=e||{};var n=new i;a(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function c(t,e){return a(t),new Blob(t,e||{})}e.exports=n?o?t.Blob:c:r?s:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],15:[function(t,e,i){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){var i=this;function n(){i.off(t,n),e.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var o=0;o<n.length;o++)if((i=n[o])===e||i.fn===e){n.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],16:[function(t,e,i){e.exports=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],17:[function(t,e,i){function n(){var t;try{t=i.storage.debug}catch(t){}return t}(i=e.exports=t("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+i.humanize(this.diff),!e)return t;var n="color: "+this.color,o=0,r=0;return(t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&"%c"===t&&(r=++o)}),t.splice(r,0,n),t},i.save=function(t){try{null==t?i.storage.removeItem("debug"):i.storage.debug=t}catch(t){}},i.load=n,i.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(t){return JSON.stringify(t)},i.enable(n())},{"./debug":18}],18:[function(t,e,i){(i=e.exports=function(t){function e(){}function r(){var t=r,e=+new Date,a=e-(n||e);t.diff=a,t.prev=n,t.curr=e,n=e,null==t.useColors&&(t.useColors=i.useColors()),null==t.color&&t.useColors&&(t.color=i.colors[o++%i.colors.length]);var s=Array.prototype.slice.call(arguments);s[0]=i.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,function(e,n){if("%%"===e)return e;c++;var o=i.formatters[n];if("function"==typeof o){var r=s[c];e=o.call(t,r),s.splice(c,1),c--}return e}),"function"==typeof i.formatArgs&&(s=i.formatArgs.apply(t,s));var l=r.log||i.log||console.log.bind(console);l.apply(t,s)}e.enabled=!1,r.enabled=!0;var a=i.enabled(t)?r:e;return a.namespace=t,a}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},i.disable=function(){i.enable("")},i.enable=function(t){i.save(t);for(var e=(t||"").split(/[\s,]+/),n=e.length,o=0;o<n;o++)e[o]&&("-"===(t=e[o].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")))},i.enabled=function(t){var e,n;for(e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=t("ms"),i.names=[],i.skips=[],i.formatters={};var n,o=0},{ms:25}],19:[function(t,e,i){(function(e){var n=t("./keys"),o=t("has-binary"),r=t("arraybuffer.slice"),a=t("base64-arraybuffer"),s=t("after"),c=t("utf8"),l=navigator.userAgent.match(/Android/i),u=/PhantomJS/i.test(navigator.userAgent),p=l||u;i.protocol=3;var h=i.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=n(h),f={type:"error",data:"parser error"},m=t("blob");function g(t,e,i){for(var n=new Array(t.length),o=s(t.length,i),r=function(t,i,o){e(i,function(e,i){n[t]=i,o(e,n)})},a=0;a<t.length;a++)r(a,t[a],o)}i.encodePacket=function(t,n,o,r){"function"==typeof n&&(r=n,n=!1),"function"==typeof o&&(r=o,o=null);var a=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&a instanceof ArrayBuffer)return function(t,e,n){if(!e)return i.encodeBase64Packet(t,n);var o=t.data,r=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=h[t.type];for(var s=0;s<r.length;s++)a[s+1]=r[s];return n(a.buffer)}(t,n,r);if(m&&a instanceof e.Blob)return function(t,e,n){if(!e)return i.encodeBase64Packet(t,n);if(p)return function(t,e,n){if(!e)return i.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,i.encodePacket(t,e,!0,n)},o.readAsArrayBuffer(t.data)}(t,e,n);var o=new Uint8Array(1);o[0]=h[t.type];var r=new m([o.buffer,t.data]);return n(r)}(t,n,r);if(a&&a.base64)return function(t,e){var n="b"+i.packets[t.type]+t.data.data;return e(n)}(t,r);var s=h[t.type];return void 0!==t.data&&(s+=o?c.encode(String(t.data)):String(t.data)),r(""+s)},i.encodeBase64Packet=function(t,n){var o,r="b"+i.packets[t.type];if(m&&t.data instanceof e.Blob){var a=new FileReader;return a.onload=function(){var t=a.result.split(",")[1];n(r+t)},a.readAsDataURL(t.data)}try{o=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),c=new Array(s.length),l=0;l<s.length;l++)c[l]=s[l];o=String.fromCharCode.apply(null,c)}return r+=e.btoa(o),n(r)},i.decodePacket=function(t,e,n){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return i.decodeBase64Packet(t.substr(1),e);if(n)try{t=c.decode(t)}catch(t){return f}var o=t.charAt(0);return Number(o)==o&&d[o]?t.length>1?{type:d[o],data:t.substring(1)}:{type:d[o]}:f}o=new Uint8Array(t)[0];var a=r(t,1);return m&&"blob"===e&&(a=new m([a])),{type:d[o],data:a}},i.decodeBase64Packet=function(t,i){var n=d[t.charAt(0)];if(!e.ArrayBuffer)return{type:n,data:{base64:!0,data:t.substr(1)}};var o=a.decode(t.substr(1));return"blob"===i&&m&&(o=new m([o])),{type:n,data:o}},i.encodePayload=function(t,e,n){"function"==typeof e&&(n=e,e=null);var r=o(t);if(e&&r)return m&&!p?i.encodePayloadAsBlob(t,n):i.encodePayloadAsArrayBuffer(t,n);if(!t.length)return n("0:");g(t,function(t,n){i.encodePacket(t,!!r&&e,!0,function(t){n(null,function(t){return t.length+":"+t}(t))})},function(t,e){return n(e.join(""))})},i.decodePayload=function(t,e,n){if("string"!=typeof t)return i.decodePayloadAsBinary(t,e,n);var o;if("function"==typeof e&&(n=e,e=null),""==t)return n(f,0,1);for(var r,a,s="",c=0,l=t.length;c<l;c++){var u=t.charAt(c);if(":"!=u)s+=u;else{if(""==s||s!=(r=Number(s)))return n(f,0,1);if(s!=(a=t.substr(c+1,r)).length)return n(f,0,1);if(a.length){if(o=i.decodePacket(a,e,!0),f.type==o.type&&f.data==o.data)return n(f,0,1);if(!1===n(o,c+r,l))return}c+=r,s=""}}return""!=s?n(f,0,1):void 0},i.encodePayloadAsArrayBuffer=function(t,e){if(!t.length)return e(new ArrayBuffer(0));g(t,function(t,e){i.encodePacket(t,!0,!0,function(t){return e(null,t)})},function(t,i){var n=i.reduce(function(t,e){var i;return t+(i="string"==typeof e?e.length:e.byteLength).toString().length+i+2},0),o=new Uint8Array(n),r=0;return i.forEach(function(t){var e="string"==typeof t,i=t;if(e){for(var n=new Uint8Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);i=n.buffer}o[r++]=e?0:1;var s=i.byteLength.toString();for(a=0;a<s.length;a++)o[r++]=parseInt(s[a]);o[r++]=255;for(n=new Uint8Array(i),a=0;a<n.length;a++)o[r++]=n[a]}),e(o.buffer)})},i.encodePayloadAsBlob=function(t,e){g(t,function(t,e){i.encodePacket(t,!0,!0,function(t){var i=new Uint8Array(1);if(i[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,i[0]=0}var r=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),a=new Uint8Array(r.length+1);for(o=0;o<r.length;o++)a[o]=parseInt(r[o]);if(a[r.length]=255,m){var s=new m([i.buffer,a.buffer,t]);e(null,s)}})},function(t,i){return e(new m(i))})},i.decodePayloadAsBinary=function(t,e,n){"function"==typeof e&&(n=e,e=null);for(var o=t,a=[],s=!1;o.byteLength>0;){for(var c=new Uint8Array(o),l=0===c[0],u="",p=1;255!=c[p];p++){if(u.length>310){s=!0;break}u+=c[p]}if(s)return n(f,0,1);o=r(o,2+u.length),u=parseInt(u);var h=r(o,0,u);if(l)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(t){var d=new Uint8Array(h);h="";for(p=0;p<d.length;p++)h+=String.fromCharCode(d[p])}a.push(h),o=r(o,u)}var m=a.length;a.forEach(function(t,o){n(i.decodePacket(t,e,!0),o,m)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(t,e,i){e.exports=Object.keys||function(t){var e=[],i=Object.prototype.hasOwnProperty;for(var n in t)i.call(t,n)&&e.push(n);return e}},{}],21:[function(t,e,i){(function(i){var n=t("isarray");e.exports=function(t){return function t(e){if(!e)return!1;if(i.Buffer&&i.Buffer.isBuffer(e)||i.ArrayBuffer&&e instanceof ArrayBuffer||i.Blob&&e instanceof Blob||i.File&&e instanceof File)return!0;if(n(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==(void 0===e?"undefined":o(e)))for(var a in e.toJSON&&(e=e.toJSON()),e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return!0;return!1}(t)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{isarray:24}],22:[function(t,e,i){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},{}],23:[function(t,e,i){var n=[].indexOf;e.exports=function(t,e){if(n)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},{}],24:[function(t,e,i){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],25:[function(t,e,i){var n=1e3,o=60*n,r=60*o,a=24*r,s=365.25*a;function c(t,e,i){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+i:Math.ceil(t/e)+" "+i+"s"}e.exports=function(t,e){return e=e||{},"string"==typeof t?function(t){if((t=""+t).length>1e4)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var i=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*s;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*o;case"seconds":case"second":case"secs":case"sec":case"s":return i*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i}}(t):e.long?function(t){return c(t,a,"day")||c(t,r,"hour")||c(t,o,"minute")||c(t,n,"second")||t+" ms"}(t):function(t){return t>=a?Math.round(t/a)+"d":t>=r?Math.round(t/r)+"h":t>=o?Math.round(t/o)+"m":t>=n?Math.round(t/n)+"s":t+"ms"}(t)}},{}],26:[function(t,e,i){(function(t){var i=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(s,""),t.JSON&&JSON.parse?JSON.parse(e):i.test(e.replace(n,"@").replace(o,"]").replace(r,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],27:[function(t,e,i){i.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},i.decode=function(t){for(var e={},i=t.split("&"),n=0,o=i.length;n<o;n++){var r=i[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},{}],28:[function(t,e,i){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e=t,i=t.indexOf("["),r=t.indexOf("]");-1!=i&&-1!=r&&(t=t.substring(0,i)+t.substring(i,r).replace(/:/g,";")+t.substring(r,t.length));for(var a=n.exec(t||""),s={},c=14;c--;)s[o[c]]=a[c]||"";return-1!=i&&-1!=r&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],29:[function(t,e,i){(function(t){(function(n){var r="object"==(void 0===i?"undefined":o(i))&&i,a="object"==(void 0===e?"undefined":o(e))&&e&&e.exports==r&&e,s="object"==(void 0===t?"undefined":o(t))&&t;s.global!==s&&s.window!==s||(n=s);var c,l,u,p=String.fromCharCode;function h(t){for(var e,i,n=[],o=0,r=t.length;o<r;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<r?56320==(64512&(i=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--):n.push(e);return n}function d(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function f(t,e){return p(t>>e&63|128)}function m(t){if(0==(4294967168&t))return p(t);var e="";return 0==(4294965248&t)?e=p(t>>6&31|192):0==(4294901760&t)?(d(t),e=p(t>>12&15|224),e+=f(t,6)):0==(4292870144&t)&&(e=p(t>>18&7|240),e+=f(t,12),e+=f(t,6)),e+=p(63&t|128)}function g(){if(u>=l)throw Error("Invalid byte index");var t=255&c[u];if(u++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function y(){var t,e;if(u>l)throw Error("Invalid byte index");if(u==l)return!1;if(t=255&c[u],u++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|g())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|g()<<6|g())>=2048)return d(e),e;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=(15&t)<<18|g()<<12|g()<<6|g())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}var v={version:"2.0.0",encode:function(t){for(var e=h(t),i=e.length,n=-1,o="";++n<i;)o+=m(e[n]);return o},decode:function(t){c=h(t),l=c.length,u=0;for(var e,i=[];!1!==(e=y());)i.push(e);return function(t){for(var e,i=t.length,n=-1,o="";++n<i;)(e=t[n])>65535&&(o+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=p(e);return o}(i)}};if(r&&!r.nodeType)if(a)a.exports=v;else{var b={}.hasOwnProperty;for(var k in v)b.call(v,k)&&(r[k]=v[k])}else n.utf8=v})(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],30:[function(t,e,i){var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=64,a={},s=0,c=0;function l(t){var e="";do{e=o[t%r]+e,t=Math.floor(t/r)}while(t>0);return e}function u(){var t=l(+new Date);return t!==n?(s=0,n=t):t+"."+l(s++)}for(;c<r;c++)a[o[c]]=c;u.encode=l,u.decode=function(t){var e=0;for(c=0;c<t.length;c++)e=e*r+a[t.charAt(c)];return e},e.exports=u},{}],31:[function(t,e,i){var n=t("./url"),r=t("socket.io-parser"),a=t("./manager"),s=t("debug")("socket.io-client");e.exports=i=l;var c=i.managers={};function l(t,e){"object"==(void 0===t?"undefined":o(t))&&(e=t,t=void 0),e=e||{};var i,r=n(t),l=r.source,u=r.id,p=r.path,h=c[u]&&p in c[u].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||h?(s("ignoring socket cache for %s",l),i=a(l,e)):(c[u]||(s("new io instance for %s",l),c[u]=a(l,e)),i=c[u]),i.socket(r.path)}i.protocol=r.protocol,i.connect=l,i.Manager=t("./manager"),i.Socket=t("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(t,e,i){var n=t("engine.io-client"),r=t("./socket"),a=t("component-emitter"),s=t("socket.io-parser"),c=t("./on"),l=t("component-bind"),u=t("debug")("socket.io-client:manager"),p=t("indexof"),h=t("backo2"),d=Object.prototype.hasOwnProperty;function f(t,e){if(!(this instanceof f))return new f(t,e);t&&"object"==(void 0===t?"undefined":o(t))&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}e.exports=f,f.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},f.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(f.prototype),f.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},f.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},f.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},f.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},f.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},f.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},f.prototype.open=f.prototype.connect=function(t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=n(this.uri,this.opts);var e=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=c(e,"open",function(){i.onopen(),t&&t()}),r=c(e,"error",function(e){if(u("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var s=setTimeout(function(){u("connect attempt timed out after %d",a),o.destroy(),e.close(),e.emit("error","timeout"),i.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(o),this.subs.push(r),this},f.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(c(t,"data",l(this,"ondata"))),this.subs.push(c(t,"ping",l(this,"onping"))),this.subs.push(c(t,"pong",l(this,"onpong"))),this.subs.push(c(t,"error",l(this,"onerror"))),this.subs.push(c(t,"close",l(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",l(this,"ondecoded")))},f.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},f.prototype.ondata=function(t){this.decoder.add(t)},f.prototype.ondecoded=function(t){this.emit("packet",t)},f.prototype.onerror=function(t){u("error",t),this.emitAll("error",t)},f.prototype.socket=function(t){var e=this.nsps[t];if(!e){e=new r(this,t),this.nsps[t]=e;var i=this;e.on("connecting",n),e.on("connect",function(){e.id=i.engine.id}),this.autoConnect&&n()}function n(){~p(i.connecting,e)||i.connecting.push(e)}return e},f.prototype.destroy=function(t){var e=p(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},f.prototype.packet=function(t){u("writing packet %j",t);var e=this;e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(i){for(var n=0;n<i.length;n++)e.engine.write(i[n],t.options);e.encoding=!1,e.processPacketQueue()}))},f.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},f.prototype.cleanup=function(){var t;for(u("cleanup");t=this.subs.shift();)t.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},f.prototype.close=f.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},f.prototype.onclose=function(t){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();u("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var i=setTimeout(function(){t.skipReconnect||(u("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(u("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(u("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(i)}})}},f.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(t,e,i){e.exports=function(t,e,i){return t.on(e,i),{destroy:function(){t.removeListener(e,i)}}}},{}],34:[function(t,e,i){var n=t("socket.io-parser"),o=t("component-emitter"),r=t("to-array"),a=t("./on"),s=t("component-bind"),c=t("debug")("socket.io-client:socket"),l=t("has-binary");e.exports=h;var u={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;function h(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}o(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",s(this,"onopen")),a(t,"packet",s(this,"onpacket")),a(t,"close",s(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},h.prototype.send=function(){var t=r(arguments);return t.unshift("message"),this.emit.apply(this,t),this},h.prototype.emit=function(t){if(u.hasOwnProperty(t))return p.apply(this,arguments),this;var e=r(arguments),i=n.EVENT;l(e)&&(i=n.BINARY_EVENT);var o={type:i,data:e,options:{}};return o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},h.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},h.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:n.CONNECT})},h.prototype.onclose=function(t){c("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},h.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(t);break;case n.ACK:case n.BINARY_ACK:this.onack(t);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",t.data)}},h.prototype.onevent=function(t){var e=t.data||[];c("emitting event %j",e),null!=t.id&&(c("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},h.prototype.ack=function(t){var e=this,i=!1;return function(){if(!i){i=!0;var o=r(arguments);c("sending ack %j",o);var a=l(o)?n.BINARY_ACK:n.ACK;e.packet({type:a,id:t,data:o})}}},h.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(c("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):c("bad ack %s",t.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(t,e,i){(function(i){var n=t("parseuri"),o=t("debug")("socket.io-client:url");e.exports=function(t,e){var r=t,e=e||i.location;null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),o("parse %s",t),r=n(t));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port,r.href=r.protocol+"://"+a+(e&&e.port==r.port?"":":"+r.port),r}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{debug:39,parseuri:45}],36:[function(t,e,i){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},{}],37:[function(t,e,i){var n=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}},{}],38:[function(t,e,i){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<n.length;o++)if((i=n[o])===e||i.fn===e){n.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],39:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{"./debug":40,dup:17}],40:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18,ms:44}],41:[function(t,e,i){(function(i){var n=t("isarray");e.exports=function(t){return function t(e){if(!e)return!1;if(i.Buffer&&i.Buffer.isBuffer&&i.Buffer.isBuffer(e)||i.ArrayBuffer&&e instanceof ArrayBuffer||i.Blob&&e instanceof Blob||i.File&&e instanceof File)return!0;if(n(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==(void 0===e?"undefined":o(e)))for(var a in e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return!0;return!1}(t)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{isarray:43}],42:[function(t,e,i){arguments[4][23][0].apply(i,arguments)},{dup:23}],43:[function(t,e,i){arguments[4][24][0].apply(i,arguments)},{dup:24}],44:[function(t,e,i){arguments[4][25][0].apply(i,arguments)},{dup:25}],45:[function(t,e,i){arguments[4][28][0].apply(i,arguments)},{dup:28}],46:[function(t,e,i){(function(e){var n=t("isarray"),r=t("./is-buffer");i.deconstructPacket=function(t){var e=[],i=t.data;var a=t;return a.data=function t(i){if(!i)return i;if(r(i)){var a={_placeholder:!0,num:e.length};return e.push(i),a}if(n(i)){for(var s=new Array(i.length),c=0;c<i.length;c++)s[c]=t(i[c]);return s}if("object"==(void 0===i?"undefined":o(i))&&!(i instanceof Date)){for(var l in s={},i)s[l]=t(i[l]);return s}return i}(i),a.attachments=e.length,{packet:a,buffers:e}},i.reconstructPacket=function(t,e){return t.data=function t(i){if(i&&i._placeholder)return e[i.num];if(n(i)){for(var r=0;r<i.length;r++)i[r]=t(i[r]);return i}if(i&&"object"==(void 0===i?"undefined":o(i))){for(var a in i)i[a]=t(i[a]);return i}return i}(t.data),t.attachments=void 0,t},i.removeBlobs=function(t,i){var a=0,s=t;(function t(c,l,u){if(!c)return c;if(e.Blob&&c instanceof Blob||e.File&&c instanceof File){a++;var p=new FileReader;p.onload=function(){u?u[l]=this.result:s=this.result,--a||i(s)},p.readAsArrayBuffer(c)}else if(n(c))for(var h=0;h<c.length;h++)t(c[h],h,c);else if(c&&"object"==(void 0===c?"undefined":o(c))&&!r(c))for(var d in c)t(c[d],d,c)})(s),a||i(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{"./is-buffer":48,isarray:43}],47:[function(t,e,i){var n=t("debug")("socket.io-parser"),o=t("json3"),r=(t("isarray"),t("component-emitter")),a=t("./binary"),s=t("./is-buffer");function c(){}function l(t){var e="",r=!1;return e+=t.type,i.BINARY_EVENT!=t.type&&i.BINARY_ACK!=t.type||(e+=t.attachments,e+="-"),t.nsp&&"/"!=t.nsp&&(r=!0,e+=t.nsp),null!=t.id&&(r&&(e+=",",r=!1),e+=t.id),null!=t.data&&(r&&(e+=","),e+=o.stringify(t.data)),n("encoded %j as %s",t,e),e}function u(){this.reconstructor=null}function p(t){this.reconPack=t,this.buffers=[]}function h(t){return{type:i.ERROR,data:"parser error"}}i.protocol=4,i.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],i.CONNECT=0,i.DISCONNECT=1,i.EVENT=2,i.ACK=3,i.ERROR=4,i.BINARY_EVENT=5,i.BINARY_ACK=6,i.Encoder=c,i.Decoder=u,c.prototype.encode=function(t,e){(n("encoding packet %j",t),i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type)?function(t,e){a.removeBlobs(t,function(t){var i=a.deconstructPacket(t),n=l(i.packet),o=i.buffers;o.unshift(n),e(o)})}(t,e):e([l(t)])},r(u.prototype),u.prototype.add=function(t){var e;if("string"==typeof t)e=function(t){var e={},r=0;if(e.type=Number(t.charAt(0)),null==i.types[e.type])return h();if(i.BINARY_EVENT==e.type||i.BINARY_ACK==e.type){for(var a="";"-"!=t.charAt(++r)&&(a+=t.charAt(r),r!=t.length););if(a!=Number(a)||"-"!=t.charAt(r))throw new Error("Illegal attachments");e.attachments=Number(a)}if("/"==t.charAt(r+1))for(e.nsp="";++r;){var s=t.charAt(r);if(","==s)break;if(e.nsp+=s,r==t.length)break}else e.nsp="/";var c=t.charAt(r+1);if(""!==c&&Number(c)==c){for(e.id="";++r;){var s=t.charAt(r);if(null==s||Number(s)!=s){--r;break}if(e.id+=t.charAt(r),r==t.length)break}e.id=Number(e.id)}if(t.charAt(++r))try{e.data=o.parse(t.substr(r))}catch(t){return h()}return n("decoded %s as %j",t,e),e}(t),i.BINARY_EVENT==e.type||i.BINARY_ACK==e.type?(this.reconstructor=new p(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!s(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},u.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(t,e,i){(function(t){e.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],49:[function(t,e,i){arguments[4][15][0].apply(i,arguments)},{dup:15}],50:[function(t,e,i){(function(t){(function(){var n={function:!0,object:!0},r=n[void 0===i?"undefined":o(i)]&&i&&!i.nodeType&&i,a=n["undefined"==typeof window?"undefined":o(window)]&&window||this,s=r&&n[void 0===e?"undefined":o(e)]&&e&&!e.nodeType&&"object"==(void 0===t?"undefined":o(t))&&t;function c(t,e){t||(t=a.Object()),e||(e=a.Object());var i=t.Number||a.Number,r=t.String||a.String,s=t.Object||a.Object,l=t.Date||a.Date,u=t.SyntaxError||a.SyntaxError,p=t.TypeError||a.TypeError,h=t.Math||a.Math,d=t.JSON||a.JSON;"object"==(void 0===d?"undefined":o(d))&&d&&(e.stringify=d.stringify,e.parse=d.parse);var f,m,g,y=s.prototype,v=y.toString,b=new l(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}function k(t){if(k[t]!==g)return k[t];var n;if("bug-string-char-index"==t)n="a"!="a"[0];else if("json"==t)n=k("json-stringify")&&k("json-parse");else{var o,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var s=e.stringify,c="function"==typeof s&&b;if(c){(o=function(){return 1}).toJSON=o;try{c="0"===s(0)&&"0"===s(new i)&&'""'==s(new r)&&s(v)===g&&s(g)===g&&s()===g&&"1"===s(o)&&"[1]"==s([o])&&"[null]"==s([g])&&"null"==s(null)&&"[null,null,null]"==s([g,v,null])&&s({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===s(null,o)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new l(-1))}catch(t){c=!1}}n=c}if("json-parse"==t){var u=e.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){var p=5==(o=u(a)).a.length&&1===o.a[0];if(p){try{p=!u('"\t"')}catch(t){}if(p)try{p=1!==u("01")}catch(t){}if(p)try{p=1!==u("1.")}catch(t){}}}}catch(t){p=!1}n=p}}return k[t]=!!n}if(!k("json")){var C=k("bug-string-char-index");if(!b)var _=h.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(t,e){return w[e]+365*(t-1970)+_((t-1969+(e=+(e>1)))/4)-_((t-1901+e)/100)+_((t-1601+e)/400)};if((f=y.hasOwnProperty)||(f=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=v?f=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,f=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,f.call(this,t)}),m=function(t,e){var i,r,a,s=0;for(a in(i=function(){this.valueOf=0}).prototype.valueOf=0,r=new i)f.call(r,a)&&s++;return i=r=null,s?m=2==s?function(t,e){var i,n={},o="[object Function]"==v.call(t);for(i in t)o&&"prototype"==i||f.call(n,i)||!(n[i]=1)||!f.call(t,i)||e(i)}:function(t,e){var i,n,o="[object Function]"==v.call(t);for(i in t)o&&"prototype"==i||!f.call(t,i)||(n="constructor"===i)||e(i);(n||f.call(t,i="constructor"))&&e(i)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(t,e){var i,a,s="[object Function]"==v.call(t),c=!s&&"function"!=typeof t.constructor&&n[o(t.hasOwnProperty)]&&t.hasOwnProperty||f;for(i in t)s&&"prototype"==i||!c.call(t,i)||e(i);for(a=r.length;i=r[--a];c.call(t,i)&&e(i));}),m(t,e)},!k("json-stringify")){var B={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},R=function(t,e){return("000000"+(e||0)).slice(-t)},A=function(t){for(var e='"',i=0,n=t.length,o=!C||n>10,r=o&&(C?t.split(""):t);i<n;i++){var a=t.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=B[a];break;default:if(a<32){e+="\\u00"+R(2,a.toString(16));break}e+=o?r[i]:t.charAt(i)}}return e+'"'};e.stringify=function(t,e,i){var r,a,s,c;if(n[void 0===e?"undefined":o(e)]&&e)if("[object Function]"==(c=v.call(e)))a=e;else if("[object Array]"==c){s={};for(var l,u=0,h=e.length;u<h;l=e[u++],("[object String]"==(c=v.call(l))||"[object Number]"==c)&&(s[l]=1));}if(i)if("[object Number]"==(c=v.call(i))){if((i-=i%1)>0)for(r="",i>10&&(i=10);r.length<i;r+=" ");}else"[object String]"==c&&(r=i.length<=10?i:i.slice(0,10));return function t(e,i,n,r,a,s,c){var l,u,h,d,y,b,k,C,w,B,P,S,M,N,F,E;try{l=i[e]}catch(t){}if("object"==(void 0===l?"undefined":o(l))&&l)if("[object Date]"!=(u=v.call(l))||f.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=u&&"[object String]"!=u&&"[object Array]"!=u||f.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&l<1/0){if(x){for(y=_(l/864e5),h=_(y/365.2425)+1970-1;x(h+1,0)<=y;h++);for(d=_((y-x(h,0))/30.42);x(h,d+1)<=y;d++);y=1+y-x(h,d),k=_((b=(l%864e5+864e5)%864e5)/36e5)%24,C=_(b/6e4)%60,w=_(b/1e3)%60,B=b%1e3}else h=l.getUTCFullYear(),d=l.getUTCMonth(),y=l.getUTCDate(),k=l.getUTCHours(),C=l.getUTCMinutes(),w=l.getUTCSeconds(),B=l.getUTCMilliseconds();l=(h<=0||h>=1e4?(h<0?"-":"+")+R(6,h<0?-h:h):R(4,h))+"-"+R(2,d+1)+"-"+R(2,y)+"T"+R(2,k)+":"+R(2,C)+":"+R(2,w)+"."+R(3,B)+"Z"}else l=null;if(n&&(l=n.call(i,e,l)),null===l)return"null";if("[object Boolean]"==(u=v.call(l)))return""+l;if("[object Number]"==u)return l>-1/0&&l<1/0?""+l:"null";if("[object String]"==u)return A(""+l);if("object"==(void 0===l?"undefined":o(l))){for(N=c.length;N--;)if(c[N]===l)throw p();if(c.push(l),P=[],F=s,s+=a,"[object Array]"==u){for(M=0,N=l.length;M<N;M++)S=t(M,l,n,r,a,s,c),P.push(S===g?"null":S);E=P.length?a?"[\n"+s+P.join(",\n"+s)+"\n"+F+"]":"["+P.join(",")+"]":"[]"}else m(r||l,function(e){var i=t(e,l,n,r,a,s,c);i!==g&&P.push(A(e)+":"+(a?" ":"")+i)}),E=P.length?a?"{\n"+s+P.join(",\n"+s)+"\n"+F+"}":"{"+P.join(",")+"}":"{}";return c.pop(),E}}("",((l={})[""]=t,l),a,s,r,"",[])}}if(!k("json-parse")){var P,S,M=r.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw P=S=null,u()},E=function(){for(var t,e,i,n,o,r=S,a=r.length;P<a;)switch(o=r.charCodeAt(P)){case 9:case 10:case 13:case 32:P++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=C?r.charAt(P):r[P],P++,t;case 34:for(t="@",P++;P<a;)if((o=r.charCodeAt(P))<32)F();else if(92==o)switch(o=r.charCodeAt(++P)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=N[o],P++;break;case 117:for(e=++P,i=P+4;P<i;P++)(o=r.charCodeAt(P))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||F();t+=M("0x"+r.slice(e,P));break;default:F()}else{if(34==o)break;for(o=r.charCodeAt(P),e=P;o>=32&&92!=o&&34!=o;)o=r.charCodeAt(++P);t+=r.slice(e,P)}if(34==r.charCodeAt(P))return P++,t;F();default:if(e=P,45==o&&(n=!0,o=r.charCodeAt(++P)),o>=48&&o<=57){for(48==o&&((o=r.charCodeAt(P+1))>=48&&o<=57)&&F(),n=!1;P<a&&((o=r.charCodeAt(P))>=48&&o<=57);P++);if(46==r.charCodeAt(P)){for(i=++P;i<a&&((o=r.charCodeAt(i))>=48&&o<=57);i++);i==P&&F(),P=i}if(101==(o=r.charCodeAt(P))||69==o){for(43!=(o=r.charCodeAt(++P))&&45!=o||P++,i=P;i<a&&((o=r.charCodeAt(i))>=48&&o<=57);i++);i==P&&F(),P=i}return+r.slice(e,P)}if(n&&F(),"true"==r.slice(P,P+4))return P+=4,!0;if("false"==r.slice(P,P+5))return P+=5,!1;if("null"==r.slice(P,P+4))return P+=4,null;F()}return"$"},T=function(t,e,i){var n=D(t,e,i);n===g?delete t[e]:t[e]=n},D=function(t,e,i){var n,r=t[e];if("object"==(void 0===r?"undefined":o(r))&&r)if("[object Array]"==v.call(r))for(n=r.length;n--;)T(r,n,i);else m(r,function(t){T(r,t,i)});return i.call(t,e,r)};e.parse=function(t,e){var i,n;return P=0,S=""+t,i=function t(e){var i,n;if("$"==e&&F(),"string"==typeof e){if("@"==(C?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(i=[];"]"!=(e=E());n||(n=!0))n&&(","==e?"]"==(e=E())&&F():F()),","==e&&F(),i.push(t(e));return i}if("{"==e){for(i={};"}"!=(e=E());n||(n=!0))n&&(","==e?"}"==(e=E())&&F():F()),","!=e&&"string"==typeof e&&"@"==(C?e.charAt(0):e[0])&&":"==E()||F(),i[e.slice(1)]=t(E());return i}F()}return e}(E()),"$"!=E()&&F(),P=S=null,e&&"[object Function]"==v.call(e)?D(((n={})[""]=i,n),"",e):i}}}return e.runInContext=c,e}if(!s||s.global!==s&&s.window!==s&&s.self!==s||(a=s),r)c(a,r);else{var l=a.JSON,u=a.JSON3,p=!1,h=c(a,a.JSON3={noConflict:function(){return p||(p=!0,a.JSON=l,a.JSON3=u,l=u=null),h}});a.JSON={parse:h.parse,stringify:h.stringify}}}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{})},{}],51:[function(t,e,i){e.exports=function(t,e){for(var i=[],n=(e=e||0)||0;n<t.length;n++)i[n-e]=t[n];return i}},{}]},{},[31])(31)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},["DiZhuSummaryClick","DizhuBegin","DizhuButton","DizhuDataBind","GameMenu","PlayPoker","SelectColor","SummaryDetail","MJMenuClick","MaJiangPlayer","MaJiangSummary","MajiangDataBind","Ready","DeskCards","HandCards","SpecCards","TakeMJCard","ActionEvent","AnimEvent","JoinRoomEvent","PlayersEvent","GangAction","SummaryClick","DefaultHallDataBind","GameRoom","PlayGame","Playway","PlaywayClick","Room","RoomPlayway","SelectPlayway","DialogClick","FeedBackDialog","JoinRoomClick","LogoutClick","MenuClick","MessageDialog","SettingClide","PlaywayGroup","RoomClick","RoomOption","common","form","init","BeiMiQR","GameTimer","PlayerRender","BeiMiCard","BeiMiCommon","BeiMiDialog","BeiMiRoomOption","BeiMiTimer","EventStop","IOUtils","logindialog","Audio","Base64","HTTP","socket.io"]);